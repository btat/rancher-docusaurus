<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Nodes and Node Pools | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://btat.github.io/rancher-docusaurus/cluster-admin/nodes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Nodes and Node Pools | My Site"><meta data-react-helmet="true" name="description" content="After you launch a Kubernetes cluster in Rancher, you can manage individual nodes from the cluster&#x27;s Node tab. Depending on the option used to provision the cluster, there are different node options available."><meta data-react-helmet="true" property="og:description" content="After you launch a Kubernetes cluster in Rancher, you can manage individual nodes from the cluster&#x27;s Node tab. Depending on the option used to provision the cluster, there are different node options available."><link data-react-helmet="true" rel="shortcut icon" href="/rancher-docusaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://btat.github.io/rancher-docusaurus/cluster-admin/nodes"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/cluster-admin/nodes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/cluster-admin/nodes" hreflang="x-default"><link rel="stylesheet" href="/rancher-docusaurus/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/rancher-docusaurus/assets/js/runtime~main.9668cced.js" as="script">
<link rel="preload" href="/rancher-docusaurus/assets/js/main.7243044c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rancher-docusaurus/"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Rancher Docs</b></a><a href="https://suse-projects.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>More SUSE Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rancher Deployment Quick Start Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installing/Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Backups and Disaster Recovery</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Authentication, Permissions and Global Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setting up Kubernetes Clusters in Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Cluster Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/backing-up-etcd">Backing up a Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/certificate-rotation">Certificate Rotation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/cleaning-cluster-nodes">Removing Kubernetes Components from Nodes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/cloning-clusters">Cloning Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-access</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-autoscaler</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">editing-clusters</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/index">Intro</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rancher-docusaurus/cluster-admin/nodes">Nodes and Node Pools</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/pod-security-policies">Assigning Pod Security Policies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/pod-security-policy">Adding a Pod Security Policy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/projects-and-namespaces">Projects and Kubernetes Namespaces with Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/restoring-etcd">Restoring a Cluster from Backup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/tools">Tools for Logging, Monitoring, and Visibility</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/cluster-admin/upgrading-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">volumes-and-storage</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pipelines</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Istio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logging</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CIS Scans</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Settings</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/cli">Using the Rancher Command Line Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/contributing">Contributing to Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/helm-charts">Helm Charts in Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/longhorn">Longhorn - Cloud native distributed block storage for Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/opa-gatekeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/system-tools">System Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nodes and Node Pools</h1></header><p>After you launch a Kubernetes cluster in Rancher, you can manage individual nodes from the cluster&#x27;s <strong>Node</strong> tab. Depending on the <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/" target="_blank" rel="noopener noreferrer">option used</a> to provision the cluster, there are different node options available.</p><p>&gt; If you want to manage the <em>cluster</em> and not individual nodes, see <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-admin/editing-clusters" target="_blank" rel="noopener noreferrer">Editing Clusters</a>.</p><header><h1>Node Options Available for Each Cluster Creation Option</h1></header><p>The following table lists which node options are available for each type of cluster in Rancher. Click the links in the <strong>Option</strong> column for more detailed information about each feature.</p><table><thead><tr><th>Option</th><th><a href="https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/rke-clusters/node-pools/" target="_blank" rel="noopener noreferrer">Nodes Hosted by an Infrastructure Provider</a></th><th><a href="https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/rke-clusters/custom-nodes/" target="_blank" rel="noopener noreferrer">Custom Node</a></th><th><a href="https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/hosted-kubernetes-clusters/" target="_blank" rel="noopener noreferrer">Hosted Cluster</a></th><th><a href="https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/registered-clusters/" target="_blank" rel="noopener noreferrer">Registered EKS Nodes</a></th><th><a href="https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/registered-clusters/" target="_blank" rel="noopener noreferrer">All Other Registered Nodes</a></th><th>Description</th></tr></thead><tbody><tr><td><a href="#cordoning-a-node">Cordon</a></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>Marks the node as unschedulable.</td></tr><tr><td><a href="#draining-a-node">Drain</a></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>Marks the node as unschedulable <em>and</em> evicts all pods.</td></tr><tr><td><a href="#managing-and-editing-individual-nodes">Edit</a></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>Enter a custom name, description, label, or taints for a node.</td></tr><tr><td><a href="#viewing-a-node-in-the-rancher-api">View API</a></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>View API data.</td></tr><tr><td><a href="#deleting-a-node">Delete</a></td><td>âœ“</td><td>âœ“</td><td></td><td>*</td><td>*</td><td>Deletes defective nodes from the cluster.</td></tr><tr><td><a href="#ssh-into-a-node-hosted-by-an-infrastructure-provider">Download Keys</a></td><td>âœ“</td><td></td><td></td><td></td><td></td><td>Download SSH key in order to SSH into the node.</td></tr><tr><td><a href="#scaling-nodes">Node Scaling</a></td><td>âœ“</td><td></td><td></td><td>âœ“</td><td></td><td>Scale the number of nodes in the node pool up or down.</td></tr></tbody></table><p>* Delete option accessible via View API</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="nodes-hosted-by-an-infrastructure-provider"></a>Nodes Hosted by an Infrastructure Provider<a class="hash-link" href="#nodes-hosted-by-an-infrastructure-provider" title="Direct link to heading">#</a></h3><p>Node pools are available when you provision Rancher-launched Kubernetes clusters on nodes that are <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/" target="_blank" rel="noopener noreferrer">hosted in an infrastructure provider.</a></p><p>Clusters provisioned using <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/#node-pools" target="_blank" rel="noopener noreferrer">one of the node pool options</a> can be scaled up or down if the node pool is edited.</p><p>A node pool can also automatically maintain the node scale that&#x27;s set during the initial cluster provisioning if <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/#about-node-auto-replace" target="_blank" rel="noopener noreferrer">node auto-replace is enabled.</a> This scale determines the number of active nodes that Rancher maintains for the cluster.</p><p>Rancher uses <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/#node-templates" target="_blank" rel="noopener noreferrer">node templates</a> to replace nodes in the node pool. Each node template uses cloud provider credentials to allow Rancher to set up the node in the infrastructure provider.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="nodes-provisioned-by-hosted-kubernetes-providers"></a>Nodes Provisioned by Hosted Kubernetes Providers<a class="hash-link" href="#nodes-provisioned-by-hosted-kubernetes-providers" title="Direct link to heading">#</a></h3><p>Options for managing nodes <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/hosted-kubernetes-clusters/" target="_blank" rel="noopener noreferrer">hosted by a Kubernetes provider</a> are somewhat limited in Rancher. Rather than using the Rancher UI to make edits such as scaling the number of nodes up or down, edit the cluster directly.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="registered-nodes"></a>Registered Nodes<a class="hash-link" href="#registered-nodes" title="Direct link to heading">#</a></h3><p>Although you can deploy workloads to a <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/registered-clusters/" target="_blank" rel="noopener noreferrer">registered cluster</a> using Rancher, you cannot manage individual cluster nodes. All management of imported cluster nodes must take place outside of Rancher.</p><header><h1>Managing and Editing Individual Nodes</h1></header><p>Editing a node lets you:</p><ul><li>Change its name</li><li>Change its description</li><li>Add <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener noreferrer">labels</a></li><li>Add/Remove <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/" target="_blank" rel="noopener noreferrer">taints</a></li></ul><p>To manage individual nodes, browse to the cluster that you want to manage and then select <strong>Nodes</strong> from the main menu. You can open the options menu for a node by clicking its <strong>â‹®</strong> icon (<strong>..</strong>.).</p><header><h1>Viewing a Node in the Rancher API</h1></header><p>Select this option to view the node&#x27;s <a href="https://rancher.com/docs/rancher/v2.6/en/api/" target="_blank" rel="noopener noreferrer">API endpoints</a>.</p><header><h1>Deleting a Node</h1></header><p>Use <strong>Delete</strong> to remove defective nodes from the cloud provider.</p><p>When you the delete a defective node, Rancher can automatically replace it with an identically provisioned node if the node is in a node pool and <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/#about-node-auto-replace" target="_blank" rel="noopener noreferrer">node auto-replace is enabled.</a></p><p>&gt;<strong>Tip:</strong> If your cluster is hosted by an infrastructure provider, and you want to scale your cluster down instead of deleting a defective node, <a href="#scaling-nodes">scale down</a> rather than delete.</p><header><h1>Scaling Nodes</h1></header><p>For nodes hosted by an infrastructure provider, you can scale the number of nodes in each <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/#node-pools" target="_blank" rel="noopener noreferrer">node pool</a> by using the scale controls. This option isn&#x27;t available for other cluster types.</p><header><h1>SSH into a Node Hosted by an Infrastructure Provider</h1></header><p>For <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/" target="_blank" rel="noopener noreferrer">nodes hosted by an infrastructure provider</a>, you have the option of downloading its SSH key so that you can connect to it remotely from your desktop.</p><ol><li><p>In the upper left corner, click <strong>â˜° &gt; Cluster Management</strong>.</p></li><li><p>On the <strong>Clusters</strong> page, go to the cluster where you want to SSH into a node and click the name of the cluster.</p></li><li><p>On the <strong>Machine Pools</strong> tab, find the node that you want to remote into and click  <strong>â‹® &gt; Download SSH Key</strong>. A ZIP file containing files used for SSH will be downloaded.</p></li><li><p>Extract the ZIP file to any location.</p></li><li><p>Open Terminal. Change your location to the extracted ZIP file.</p></li><li><p>Enter the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i id_rsa root@\&lt;IP_OF_HOST\&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ol><header><h1>Cordoning a Node</h1></header><p><em>Cordoning</em> a node marks it as unschedulable. This feature is useful for performing short tasks on the node during small maintenance windows, like reboots, upgrades, or decommissions.  When you&#x27;re done, power back on and make the node schedulable again by uncordoning it.</p><header><h1>Draining a Node</h1></header><p><em>Draining</em> is the process of first cordoning the node, and then evicting all its pods. This feature is useful for performing node maintenance (like kernel upgrades or hardware maintenance). It prevents new pods from deploying to the node while redistributing existing pods so that users don&#x27;t experience service interruption.</p><ul><li><p>For pods with a replica set, the pod is replaced by a new pod that will be scheduled to a new node. Additionally, if the pod is part of a service, then clients will automatically be redirected to the new pod.</p></li><li><p>For pods with no replica set, you need to bring up a new copy of the pod, and assuming it is not part of a service, redirect clients to it.</p></li></ul><p>You can drain nodes that are in either a <code>cordoned</code> or <code>active</code> state. When you drain a node, the node is cordoned, the nodes are evaluated for conditions they must meet to be drained, and then (if it meets the conditions) the node evicts its pods.</p><p>However, you can override the conditions draining when you initiate the drain. You&#x27;re also given an opportunity to set a grace period and timeout value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aggressive-and-safe-draining-options"></a>Aggressive and Safe Draining Options<a class="hash-link" href="#aggressive-and-safe-draining-options" title="Direct link to heading">#</a></h3><p>When you configure the upgrade strategy for the cluster, you will be able to enable node draining. If node draining is enabled, you will be able to configure how pods are deleted and rescheduled.</p><ul><li><p><strong>Aggressive Mode</strong></p><p>  In this mode, pods won&#x27;t get rescheduled to a new node, even if they do not have a controller. Kubernetes expects you to have your own logic that handles the deletion of these pods.</p><p>  Kubernetes also expects the implementation to decide what to do with pods using emptyDir. If a pod uses emptyDir to store local data, you might not be able to safely delete it, since the data in the emptyDir will be deleted once the pod is removed from the node. Choosing aggressive mode will delete these pods.</p></li><li><p><strong>Safe Mode</strong></p><p>  If a node has standalone pods or ephemeral data it will be cordoned but not drained.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="grace-period"></a>Grace Period<a class="hash-link" href="#grace-period" title="Direct link to heading">#</a></h3><p>The timeout given to each pod for cleaning things up, so they will have chance to exit gracefully. For example, when pods might need to finish any outstanding requests, roll back transactions or save state to some external storage. If negative, the default value specified in the pod will be used.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="timeout"></a>Timeout<a class="hash-link" href="#timeout" title="Direct link to heading">#</a></h3><p>The amount of time drain should continue to wait before giving up.</p><p>&gt;<strong>Kubernetes Known Issue:</strong> The <a href="https://github.com/kubernetes/kubernetes/pull/64378" target="_blank" rel="noopener noreferrer">timeout setting</a> was not enforced while draining a node before Kubernetes 1.12.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="drained-and-cordoned-state"></a>Drained and Cordoned State<a class="hash-link" href="#drained-and-cordoned-state" title="Direct link to heading">#</a></h3><p>If there&#x27;s any error related to user input, the node enters a <code>cordoned</code> state because the drain failed. You can either correct the input and attempt to drain the node again, or you can abort by uncordoning the node.</p><p>If the drain continues without error, the node enters a <code>draining</code> state. You&#x27;ll have the option to stop the drain when the node is in this state, which will stop the drain process and change the node&#x27;s state to <code>cordoned</code>.</p><p>Once drain successfully completes, the node will be in a state of <code>drained</code>. You can then power off or delete the node.</p><p>&gt;<strong>Want to know more about cordon and drain?</strong> See the <a href="https://kubernetes.io/docs/tasks/administer-cluster/cluster-management/#maintenance-on-a-node" target="_blank" rel="noopener noreferrer">Kubernetes documentation</a>.</p><header><h1>Labeling a Node to be Ignored by Rancher</h1></header><p>Some solutions, such as F5&#x27;s BIG-IP integration, may require creating a node that is never registered to a cluster.</p><p>Since the node will never finish registering, it will always be shown as unhealthy in the Rancher UI.</p><p>In that case, you may want to label the node to be ignored by Rancher so that Rancher only shows nodes as unhealthy when they are actually failing.</p><p>You can label nodes to be ignored by using a setting in the Rancher UI, or by using <code>kubectl</code>.</p><p>&gt; <strong>Note:</strong> There is an <a href="https://github.com/rancher/rancher/issues/24172" target="_blank" rel="noopener noreferrer">open issue</a> in which nodes labeled to be ignored can get stuck in an updating state.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="labeling-nodes-to-be-ignored-with-kubectl"></a>Labeling Nodes to be Ignored with kubectl<a class="hash-link" href="#labeling-nodes-to-be-ignored-with-kubectl" title="Direct link to heading">#</a></h3><p>To add a node that will be ignored by Rancher, use <code>kubectl</code> to create a node that has the following label:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cattle.rancher.io/node-status: ignore</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Result:</strong> If you add the node to a cluster, Rancher will not attempt to sync with this node. The node can still be part of the cluster and can be listed with <code>kubectl</code>.</p><p>If the label is added before the node is added to the cluster, the node will not be shown in the Rancher UI. </p><p>If the label is added after the node is added to a Rancher cluster, the node will not be removed from the UI.</p><p>If you delete the node from the Rancher server using the Rancher UI or API, the node will not be removed from the cluster if the <code>nodeName</code> is listed in the Rancher settings in the Rancher API under <code>v3/settings/ignore-node-name</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/cluster-admin/nodes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rancher-docusaurus/cluster-admin/index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Intro</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rancher-docusaurus/cluster-admin/pod-security-policies"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Assigning Pod Security Policies Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nodes-hosted-by-an-infrastructure-provider" class="table-of-contents__link">Nodes Hosted by an Infrastructure Provider</a></li><li><a href="#nodes-provisioned-by-hosted-kubernetes-providers" class="table-of-contents__link">Nodes Provisioned by Hosted Kubernetes Providers</a></li><li><a href="#registered-nodes" class="table-of-contents__link">Registered Nodes</a></li><li><a href="#aggressive-and-safe-draining-options" class="table-of-contents__link">Aggressive and Safe Draining Options</a></li><li><a href="#grace-period" class="table-of-contents__link">Grace Period</a></li><li><a href="#timeout" class="table-of-contents__link">Timeout</a></li><li><a href="#drained-and-cordoned-state" class="table-of-contents__link">Drained and Cordoned State</a></li><li><a href="#labeling-nodes-to-be-ignored-with-kubectl" class="table-of-contents__link">Labeling Nodes to be Ignored with kubectl</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.rancher.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher Website</a></li><li class="footer__item"><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rancher/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rancher-docusaurus/assets/js/runtime~main.9668cced.js"></script>
<script src="/rancher-docusaurus/assets/js/main.7243044c.js"></script>
</body>
</html>