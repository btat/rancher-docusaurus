<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">EKS Cluster Configuration Reference | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="EKS Cluster Configuration Reference | My Site"><meta data-react-helmet="true" name="description" content="Account Access"><meta data-react-helmet="true" property="og:description" content="Account Access"><link data-react-helmet="true" rel="shortcut icon" href="/rancher-docusaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference" hreflang="x-default"><link rel="stylesheet" href="/rancher-docusaurus/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js" as="script">
<link rel="preload" href="/rancher-docusaurus/assets/js/main.ed945e9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rancher-docusaurus/"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Rancher Docs</b></a><a href="https://suse-projects.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>More SUSE Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rancher Deployment Quick Start Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installing/Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Backups and Disaster Recovery</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Authentication, Permissions and Global Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setting up Kubernetes Clusters in Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Cluster Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/backing-up-etcd">Backing up a Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/certificate-rotation">Certificate Rotation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/cleaning-cluster-nodes">Removing Kubernetes Components from Nodes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/cloning-clusters">Cloning Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-access</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-autoscaler</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">editing-clusters</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference">AKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference">EKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">gke-config-reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/index">Cluster Configuration</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/k3s-config-reference">K3s Cluster Configuration Reference (Tech Preview)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/rke-config-reference">RKE Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/rke2-config-reference">RKE2 Cluster Configuration Reference (Tech Preview)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/syncing">Syncing</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/index">Intro</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/nodes">Nodes and Node Pools</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/pod-security-policies">Assigning Pod Security Policies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/pod-security-policy">Adding a Pod Security Policy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/projects-and-namespaces">Projects and Kubernetes Namespaces with Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/restoring-etcd">Restoring a Cluster from Backup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/tools">Tools for Logging, Monitoring, and Visibility</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/upgrading-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">volumes-and-storage</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pipelines</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Istio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logging</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CIS Scans</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Settings</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/cli">Using the Rancher Command Line Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/contributing">Contributing to Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/helm-charts">Helm Charts in Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/longhorn">Longhorn - Cloud native distributed block storage for Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/opa-gatekeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/system-tools">System Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for My Site <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rancher-docusaurus/cluster-admin/editing-clusters/eks-config-reference">latest version</a></b> (2.4.15).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>EKS Cluster Configuration Reference</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="account-access"></a>Account Access<a class="hash-link" href="#account-access" title="Direct link to heading">#</a></h3><p>Complete each drop-down and field using the information obtained for your IAM policy.</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td>Region</td><td>From the drop-down choose the geographical region in which to build your cluster.</td></tr><tr><td>Cloud Credentials</td><td>Select the cloud credentials that you created for your IAM policy. For more information on creating cloud credentials in Rancher, refer to <a href="https://rancher.com/docs/rancher/v2.x/en/user-settings/cloud-credentials/" target="_blank" rel="noopener noreferrer">this page.</a></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="service-role"></a>Service Role<a class="hash-link" href="#service-role" title="Direct link to heading">#</a></h3><p>Choose a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html" target="_blank" rel="noopener noreferrer">service role</a>.</p><table><thead><tr><th>Service Role</th><th>Description</th></tr></thead><tbody><tr><td>Standard: Rancher generated service role</td><td>If you choose this role, Rancher automatically adds a service role for use with the cluster.</td></tr><tr><td>Custom: Choose from your existing service roles</td><td>If you choose this role, Rancher lets you choose from service roles that you&#x27;re already created within AWS. For more information on creating a custom service role in AWS, see the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#create-service-linked-role" target="_blank" rel="noopener noreferrer">Amazon documentation</a>.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="secrets-encryption"></a>Secrets Encryption<a class="hash-link" href="#secrets-encryption" title="Direct link to heading">#</a></h3><p>Optional: To encrypt secrets, select or enter a key created in <a href="https://docs.aws.amazon.com/kms/latest/developerguide/overview.html" target="_blank" rel="noopener noreferrer">AWS Key Management Service (KMS)</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="api-server-endpoint-access"></a>API Server Endpoint Access<a class="hash-link" href="#api-server-endpoint-access" title="Direct link to heading">#</a></h3><p>Configuring Public/Private API access is an advanced use case. For details, refer to the EKS cluster endpoint access control <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-endpoint.html" target="_blank" rel="noopener noreferrer">documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="private-only-api-endpoints"></a>Private-only API Endpoints<a class="hash-link" href="#private-only-api-endpoints" title="Direct link to heading">#</a></h3><p>If you enable private and disable public API endpoint access when creating a cluster, then there is an extra step you must take in order for Rancher to connect to the cluster successfully. In this case, a pop-up will be displayed with a command that you will run on the cluster to register it with Rancher. Once the cluster is provisioned, you can run the displayed command anywhere you can connect to the cluster&#x27;s Kubernetes API.</p><p>There are two ways to avoid this extra manual step:</p><ul><li>You can create the cluster with both private and public API endpoint access on cluster creation. You can disable public access after the cluster is created and in an active state and Rancher will continue to communicate with the EKS cluster.</li><li>You can ensure that Rancher shares a subnet with the EKS cluster. Then security groups can be used to enable Rancher to communicate with the cluster&#x27;s API endpoint. In this case, the command to register the cluster is not needed, and Rancher will be able to communicate with your cluster. For more information on configuring security groups, refer to the <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html" target="_blank" rel="noopener noreferrer">security groups documentation</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-access-endpoints"></a>Public Access Endpoints<a class="hash-link" href="#public-access-endpoints" title="Direct link to heading">#</a></h3><p>Optionally limit access to the public endpoint via explicit CIDR blocks.</p><p>If you limit access to specific CIDR blocks, then it is recommended that you also enable the private access to avoid losing network communication to the cluster.</p><p>One of the following is required to enable private access:</p><ul><li>Rancher&#x27;s IP must be part of an allowed CIDR block</li><li>Private access should be enabled, and Rancher must share a subnet with the cluster and have network access to the cluster, which can be configured with a security group</li></ul><p>For more information about public and private access to the cluster endpoint, refer to the <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-endpoint.html" target="_blank" rel="noopener noreferrer">Amazon EKS documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="subnet"></a>Subnet<a class="hash-link" href="#subnet" title="Direct link to heading">#</a></h3><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>Standard: Rancher generated VPC and Subnet</td><td>While provisioning your cluster, Rancher generates a new VPC with 3 public subnets.</td></tr><tr><td>Custom: Choose from your existing VPC and Subnets</td><td>While provisioning your cluster, Rancher configures your Control Plane and nodes to use a VPC and Subnet that you&#x27;ve already <a href="https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html" target="_blank" rel="noopener noreferrer">created in AWS</a>.</td></tr></tbody></table><p> For more information, refer to the AWS documentation for <a href="https://docs.aws.amazon.com/eks/latest/userguide/network_reqs.html" target="_blank" rel="noopener noreferrer">Cluster VPC Considerations</a>. Follow one of the sets of instructions below based on your selection from the previous step.</p><ul><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html" target="_blank" rel="noopener noreferrer">What Is Amazon VPC?</a></li><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html" target="_blank" rel="noopener noreferrer">VPCs and Subnets</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="security-group"></a>Security Group<a class="hash-link" href="#security-group" title="Direct link to heading">#</a></h3><p>Amazon Documentation:</p><ul><li><a href="https://docs.aws.amazon.com/eks/latest/userguide/sec-group-reqs.html" target="_blank" rel="noopener noreferrer">Cluster Security Group Considerations</a></li><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html" target="_blank" rel="noopener noreferrer">Security Groups for Your VPC</a></li><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/getting-started-ipv4.html#getting-started-create-security-group" target="_blank" rel="noopener noreferrer">Create a Security Group</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="logging"></a>Logging<a class="hash-link" href="#logging" title="Direct link to heading">#</a></h3><p>Configure control plane logs to send to Amazon CloudWatch. You are charged the standard CloudWatch Logs data ingestion and storage costs for any logs sent to CloudWatch Logs from your clusters.</p><p>Each log type corresponds to a component of the Kubernetes control plane. To learn more about these components, see <a href="https://kubernetes.io/docs/concepts/overview/components/" target="_blank" rel="noopener noreferrer">Kubernetes Components</a> in the Kubernetes documentation.</p><p>For more information on EKS control plane logging, refer to the official <a href="https://docs.aws.amazon.com/eks/latest/userguide/control-plane-logs.html" target="_blank" rel="noopener noreferrer">documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="managed-node-groups"></a>Managed Node Groups<a class="hash-link" href="#managed-node-groups" title="Direct link to heading">#</a></h3><p>Amazon EKS managed node groups automate the provisioning and lifecycle management of nodes (Amazon EC2 instances) for Amazon EKS Kubernetes clusters. </p><p>For more information about how node groups work and how they are configured, refer to the <a href="https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html" target="_blank" rel="noopener noreferrer">EKS documentation.</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="bring-your-own-launch-template"></a>Bring your own launch template<a class="hash-link" href="#bring-your-own-launch-template" title="Direct link to heading">#</a></h4><p>A launch template ID and version can be provided in order to easily configure the EC2 instances in a node group. If a launch template is provided, then none of the settings below will be configurable in Rancher. Therefore, using a launch template would require that all the necessary and desired settings from the list below would need to be specified in the launch template. Also note that if a launch template ID and version is provided, then only the template version can be updated. Using a new template ID would require creating a new managed node group.</p><table><thead><tr><th>Option</th><th>Description</th><th>Required/Optional</th></tr></thead><tbody><tr><td>Instance Type</td><td>Choose the <a href="https://aws.amazon.com/ec2/instance-types/" target="_blank" rel="noopener noreferrer">hardware specs</a> for the instance you&#x27;re provisioning.</td><td>Required</td></tr><tr><td>Image ID</td><td>Specify a custom AMI for the nodes. Custom AMIs used with EKS must be <a href="https://aws.amazon.com/premiumsupport/knowledge-center/eks-custom-linux-ami/" target="_blank" rel="noopener noreferrer">configured properly</a></td><td>Optional</td></tr><tr><td>Node Volume Size</td><td>The launch template must specify an EBS volume with the desired size</td><td>Required</td></tr><tr><td>SSH Key</td><td>A key to be added to the instances to provide SSH access to the nodes</td><td>Optional</td></tr><tr><td>User Data</td><td>Cloud init script in <a href="https://docs.aws.amazon.com/eks/latest/userguide/launch-templates.html#launch-template-user-data" target="_blank" rel="noopener noreferrer">MIME multi-part format</a></td><td>Optional</td></tr><tr><td>Instance Resource Tags</td><td>Tag each EC2 instance in the node group</td><td>Optional</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rancher-managed-launch-templates"></a>Rancher-managed launch templates<a class="hash-link" href="#rancher-managed-launch-templates" title="Direct link to heading">#</a></h4><p>If you do not specify a launch template, then you will be able to configure the above options in the Rancher UI and all of them can be updated after creation. In order to take advantage of all of these options, Rancher will create and manage a launch template for you. Each cluster in Rancher will have one Rancher-managed launch template and each managed node group that does not have a specified launch template will have one version of the managed launch template. The name of this launch template will have the prefix &quot;rancher-managed-lt-&quot; followed by the display name of the cluster. In addition, the Rancher-managed launch template will be tagged with the key &quot;rancher-managed-template&quot; and value &quot;do-not-modify-or-delete&quot; to help identify it as Rancher-managed. It is important that this launch template and its versions not be modified, deleted, or used with any other clusters or managed node groups. Doing so could result in your node groups being &quot;degraded&quot; and needing to be destroyed and recreated.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="custom-amis"></a>Custom AMIs<a class="hash-link" href="#custom-amis" title="Direct link to heading">#</a></h4><p>If you specify a custom AMI, whether in a launch template or in Rancher, then the image must be <a href="https://aws.amazon.com/premiumsupport/knowledge-center/eks-custom-linux-ami/" target="_blank" rel="noopener noreferrer">configured properly</a> and you must provide user data to <a href="https://docs.aws.amazon.com/eks/latest/userguide/launch-templates.html#launch-template-custom-ami" target="_blank" rel="noopener noreferrer">bootstrap the node</a>. This is considered an advanced use case and understanding the requirements is imperative.</p><p>If you specify a launch template that does not contain a custom AMI, then Amazon will use the <a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-optimized-ami.html" target="_blank" rel="noopener noreferrer">EKS-optimized AMI</a> for the Kubernetes version and selected region. You can also select a <a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-optimized-ami.html#gpu-ami" target="_blank" rel="noopener noreferrer">GPU enabled instance</a> for workloads that would benefit from it.</p><p>&gt;<strong>Note</strong>
&gt;The GPU enabled instance setting in Rancher is ignored if a custom AMI is provided, either in the dropdown or in a launch template.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="spot-instances"></a>Spot instances<a class="hash-link" href="#spot-instances" title="Direct link to heading">#</a></h4><p>Spot instances are now <a href="https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html#managed-node-group-capacity-types-spot" target="_blank" rel="noopener noreferrer">supported by EKS</a>. If a launch template is specified, Amazon recommends that the template not provide an instance type. Instead, Amazon recommends providing multiple instance types. If the &quot;Request Spot Instances&quot; checkbox is enabled for a node group, then you will have the opportunity to provide multiple instance types.</p><p>&gt;<strong>Note</strong>
&gt;Any selection you made in the instance type dropdown will be ignored in this situation and you must specify at least one instance type to the &quot;Spot Instance Types&quot; section. Furthermore, a launch template used with EKS cannot request spot instances. Requesting spot instances must be part of the EKS configuration.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="node-group-settings"></a>Node Group Settings<a class="hash-link" href="#node-group-settings" title="Direct link to heading">#</a></h4><p>The following settings are also configurable. All of these except for the &quot;Node Group Name&quot; are editable after the node group is created.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>Node Group Name</td><td>The name of the node group.</td></tr><tr><td>Desired ASG Size</td><td>The desired number of instances.</td></tr><tr><td>Maximum ASG Size</td><td>The maximum number of instances. This setting won&#x27;t take effect until the <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html" target="_blank" rel="noopener noreferrer">Cluster Autoscaler</a> is installed.</td></tr><tr><td>Minimum ASG Size</td><td>The minimum number of instances. This setting won&#x27;t take effect until the <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html" target="_blank" rel="noopener noreferrer">Cluster Autoscaler</a> is installed.</td></tr><tr><td>Labels</td><td>Kubernetes labels applied to the nodes in the managed node group.</td></tr><tr><td>Tags</td><td>These are tags for the managed node group and do not propagate to any of the associated resources.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configuring-the-refresh-interval"></a>Configuring the Refresh Interval<a class="hash-link" href="#configuring-the-refresh-interval" title="Direct link to heading">#</a></h3><p>The <code>eks-refresh-cron</code> setting is deprecated. It has been migrated to the <code>eks-refresh</code> setting, which is an integer representing seconds.</p><p>The default value is 300 seconds.</p><p>The syncing interval can be changed by running <code>kubectl edit setting eks-refresh</code>.</p><p>If the <code>eks-refresh-cron</code> setting was previously set, the migration will happen automatically.</p><p>The shorter the refresh window, the less likely any race conditions will occur, but it does increase the likelihood of encountering request limits that may be in place for AWS APIs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/cluster-admin/editing-clusters/eks-config-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« AKS Cluster Configuration Reference</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/gke-config-reference/index"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GKE Cluster Configuration Reference Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#account-access" class="table-of-contents__link">Account Access</a></li><li><a href="#service-role" class="table-of-contents__link">Service Role</a></li><li><a href="#secrets-encryption" class="table-of-contents__link">Secrets Encryption</a></li><li><a href="#api-server-endpoint-access" class="table-of-contents__link">API Server Endpoint Access</a></li><li><a href="#private-only-api-endpoints" class="table-of-contents__link">Private-only API Endpoints</a></li><li><a href="#public-access-endpoints" class="table-of-contents__link">Public Access Endpoints</a></li><li><a href="#subnet" class="table-of-contents__link">Subnet</a></li><li><a href="#security-group" class="table-of-contents__link">Security Group</a></li><li><a href="#logging" class="table-of-contents__link">Logging</a></li><li><a href="#managed-node-groups" class="table-of-contents__link">Managed Node Groups</a></li><li><a href="#configuring-the-refresh-interval" class="table-of-contents__link">Configuring the Refresh Interval</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.rancher.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher Website</a></li><li class="footer__item"><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rancher/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js"></script>
<script src="/rancher-docusaurus/assets/js/main.ed945e9c.js"></script>
</body>
</html>