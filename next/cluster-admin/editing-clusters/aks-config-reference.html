<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">AKS Cluster Configuration Reference | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="AKS Cluster Configuration Reference | My Site"><meta data-react-helmet="true" name="description" content="- Support for adding more than one node pool"><meta data-react-helmet="true" property="og:description" content="- Support for adding more than one node pool"><link data-react-helmet="true" rel="shortcut icon" href="/rancher-docusaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference" hreflang="x-default"><link rel="stylesheet" href="/rancher-docusaurus/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js" as="script">
<link rel="preload" href="/rancher-docusaurus/assets/js/main.ed945e9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rancher-docusaurus/"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Rancher Docs</b></a><a href="https://suse-projects.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>More SUSE Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rancher Deployment Quick Start Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installing/Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Backups and Disaster Recovery</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Authentication, Permissions and Global Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setting up Kubernetes Clusters in Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Cluster Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/backing-up-etcd">Backing up a Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/certificate-rotation">Certificate Rotation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/cleaning-cluster-nodes">Removing Kubernetes Components from Nodes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/cloning-clusters">Cloning Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-access</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">cluster-autoscaler</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">editing-clusters</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/aks-config-reference">AKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference">EKS Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">gke-config-reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/index">Cluster Configuration</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/k3s-config-reference">K3s Cluster Configuration Reference (Tech Preview)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/rke-config-reference">RKE Cluster Configuration Reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/rke2-config-reference">RKE2 Cluster Configuration Reference (Tech Preview)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/syncing">Syncing</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/index">Intro</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/nodes">Nodes and Node Pools</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/pod-security-policies">Assigning Pod Security Policies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/pod-security-policy">Adding a Pod Security Policy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/projects-and-namespaces">Projects and Kubernetes Namespaces with Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/restoring-etcd">Restoring a Cluster from Backup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/tools">Tools for Logging, Monitoring, and Visibility</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/next/cluster-admin/upgrading-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">volumes-and-storage</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pipelines</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Istio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logging</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CIS Scans</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Settings</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/cli">Using the Rancher Command Line Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/contributing">Contributing to Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/helm-charts">Helm Charts in Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/longhorn">Longhorn - Cloud native distributed block storage for Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/opa-gatekeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/next/system-tools">System Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for My Site <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rancher-docusaurus/cluster-admin/editing-clusters/aks-config-reference">latest version</a></b> (2.4.15).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Changes in Rancher v2.6</h1></header><ul><li>Support for adding more than one node pool</li><li>Support for private clusters</li><li>Enabled autoscaling node pools</li><li>The AKS permissions are now configured in cloud credentials</li></ul><header><h1>Role-based Access Control</h1></header><p>When provisioning an AKS cluster in the Rancher UI, RBAC cannot be disabled. If role-based access control is disabled for the cluster in AKS, the cluster cannot be registered or imported into Rancher.</p><p>Rancher can configure member roles for AKS clusters in the same way as any other cluster. For more information, see the section on <a href="https://rancher.com/docs/rancher/v2.6/en/admin-settings/rbac" target="_blank" rel="noopener noreferrer">role-based access control.</a></p><header><h1>Cloud Credentials</h1></header><p>&gt; The configuration information in this section assumes you have already set up a service principal for Rancher. For step-by-step instructions for how to set up the service principal, see <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/hosted-kubernetes-clusters/aks/#prerequisites-in-microsoft-azure" target="_blank" rel="noopener noreferrer">this section.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="tenant-id"></a>Tenant ID<a class="hash-link" href="#tenant-id" title="Direct link to heading">#</a></h3><p>To get the tenant ID, go to the Azure Portal, then click <strong>Azure Active Directory</strong>, then click <strong>App registrations</strong>, then click the name of the service principal. The tenant ID is listed on the app registration detail page as <strong>Directory (tenant) ID</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="subscription-id"></a>Subscription ID<a class="hash-link" href="#subscription-id" title="Direct link to heading">#</a></h3><p>To get the subscription ID, click <strong>All Services</strong> in the left navigation bar. Then click <strong>Subscriptions</strong>. Go to the name of the subscription that you want to associate with your Kubernetes cluster and copy the <strong>Subscription ID</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="client-id"></a>Client ID<a class="hash-link" href="#client-id" title="Direct link to heading">#</a></h3><p>To get the client ID, go to the Azure Portal, then click <strong>Azure Active Directory</strong>, then click <strong>App registrations,</strong> then click the name of the service principal. The client ID is listed on the app registration detail page as <strong>Application (client) ID</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="client-secret"></a>Client Secret<a class="hash-link" href="#client-secret" title="Direct link to heading">#</a></h3><p>You can&#x27;t retrieve the client secret value after it is created, so if you don&#x27;t already have a client secret value, you will need to create a new client secret.</p><p>To get a new client secret, go to the Azure Portal, then click <strong>Azure Active Directory</strong>, then click <strong>App registrations,</strong> then click the name of the service principal.</p><p>Then click <strong>Certificates &amp; secrets</strong> and click <strong>New client secret</strong>. Click <strong>Add</strong>. Then copy the <strong>Value</strong> of the new client secret.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="environment"></a>Environment<a class="hash-link" href="#environment" title="Direct link to heading">#</a></h3><p>Microsoft provides multiple <a href="https://docs.microsoft.com/en-us/cli/azure/cloud?view=azure-cli-latest" target="_blank" rel="noopener noreferrer">clouds</a> for compliance with regional laws, which are available for your use:</p><ul><li>AzurePublicCloud</li><li>AzureGermanCloud</li><li>AzureChinaCloud</li><li>AzureUSGovernmentCloud</li></ul><header><h1>Account Access</h1></header><p>In this section you will need to select an existing Azure cloud credential or create a new one.</p><p>For help configuring your Azure cloud credential, see <a href="#cloud-credentials">this section.</a></p><header><h1>Cluster Location</h1></header><p>Configure the cluster and node location. For more information on availability zones for AKS, see the <a href="https://docs.microsoft.com/en-us/azure/aks/availability-zones" target="_blank" rel="noopener noreferrer">AKS documentation.</a></p><p>The high availability locations include multiple availability zones.</p><header><h1>Cluster Options</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="kubernetes-version"></a>Kubernetes Version<a class="hash-link" href="#kubernetes-version" title="Direct link to heading">#</a></h3><p>The available Kubernetes versions are dynamically fetched from the Azure API.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="cluster-resource-group"></a>Cluster Resource Group<a class="hash-link" href="#cluster-resource-group" title="Direct link to heading">#</a></h3><p>A resource group is a container that holds related resources for an Azure solution. The resource group can include all the resources for the solution, or only those resources that you want to manage as a group. You decide how you want to allocate resources to resource groups based on what makes the most sense for your organization. Generally, add resources that share the same lifecycle to the same resource group so you can easily deploy, update, and delete them as a group.</p><p>Use an existing resource group or enter a resource group name and one will be created for you.</p><p>Using a resource group containing an existing AKS cluster will create a new resource group. Azure AKS only allows one AKS cluster per resource group.</p><p>For information on managing resource groups, see the <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-portal" target="_blank" rel="noopener noreferrer">Azure documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="linux-admin-username"></a>Linux Admin Username<a class="hash-link" href="#linux-admin-username" title="Direct link to heading">#</a></h3><p>The username used to create an SSH connection to the Linux nodes.</p><p>The default username for AKS nodes is <code>azureuser</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ssh-public-key"></a>SSH Public Key<a class="hash-link" href="#ssh-public-key" title="Direct link to heading">#</a></h3><p>The key used to create an SSH connection to the Linux nodes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="tags"></a>Tags<a class="hash-link" href="#tags" title="Direct link to heading">#</a></h3><p>Cluster tags can be useful if your organization uses tags as a way to organize resources across multiple Azure services. These tags don&#x27;t apply to resources within the cluster.</p><header><h1>Networking Options</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="loadbalancer-sku"></a>LoadBalancer SKU<a class="hash-link" href="#loadbalancer-sku" title="Direct link to heading">#</a></h3><p>Azure load balancers support both standard and basic SKUs (stock keeping units).</p><p>For a comparison of standard and basic load balancers, see the official <a href="https://docs.microsoft.com/en-us/azure/load-balancer/skus#skus" target="_blank" rel="noopener noreferrer">Azure documentation.</a> Microsoft recommends the Standard load balancer.</p><p>The Standard load balancer is required if you have selected one or more availability zones, or if you have more than one node pool.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="network-policy"></a>Network Policy<a class="hash-link" href="#network-policy" title="Direct link to heading">#</a></h3><p>All pods in an AKS cluster can send and receive traffic without limitations, by default. To improve security, you can define rules that control the flow of traffic. The Network Policy feature in Kubernetes lets you define rules for ingress and egress traffic between pods in a cluster.</p><p>Azure provides two ways to implement network policy. You choose a network policy option when you create an AKS cluster. The policy option can&#x27;t be changed after the cluster is created:</p><ul><li>Azure&#x27;s own implementation, called Azure Network Policies. The Azure network policy requires the Azure CNI.</li><li>Calico Network Policies, an open-source network and network security solution founded by <a href="https://www.tigera.io/" target="_blank" rel="noopener noreferrer">Tigera</a>.</li></ul><p>You can also choose to have no network policy.</p><p>For more information about the differences between Azure and Calico network policies and their capabilities, see the <a href="https://docs.microsoft.com/en-us/azure/aks/use-network-policies#differences-between-azure-and-calico-policies-and-their-capabilities" target="_blank" rel="noopener noreferrer">AKS documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="dns-prefix"></a>DNS Prefix<a class="hash-link" href="#dns-prefix" title="Direct link to heading">#</a></h3><p>Enter a unique DNS prefix for your cluster&#x27;s Kubernetes API server FQDN.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="network-plugin"></a>Network Plugin<a class="hash-link" href="#network-plugin" title="Direct link to heading">#</a></h3><p>There are two network plugins: kubenet and Azure CNI.</p><p>The <a href="https://kubernetes.io/docs/concepts/cluster-administration/network-plugins/#kubenet" target="_blank" rel="noopener noreferrer">kubenet</a> Kubernetes plugin is the default configuration for AKS cluster creation. When kubenet is used, each node in the cluster receives a routable IP address. The pods use NAT to communicate with other resources outside the AKS cluster. This approach reduces the number of IP addresses you need to reserve in your network space for pods to use.</p><p>With the Azure CNI (advanced) networking plugin, pods get full virtual network connectivity and can be directly reached via their private IP address from connected networks. This plugin requires more IP address space.</p><p>For more information on the differences between kubenet and Azure CNI, see the <a href="https://docs.microsoft.com/en-us/azure/aks/concepts-network#compare-network-models" target="_blank" rel="noopener noreferrer">AKS documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="http-application-routing"></a>HTTP Application Routing<a class="hash-link" href="#http-application-routing" title="Direct link to heading">#</a></h3><p>When enabled, the HTTP application routing add-on makes it easier to access applications deployed to the AKS cluster. It deploys two components: a <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener noreferrer">Kubernetes Ingress controller</a> and an <a href="https://github.com/kubernetes-incubator/external-dns" target="_blank" rel="noopener noreferrer">External-DNS</a> controller.</p><p>For more information, see the <a href="https://docs.microsoft.com/en-us/azure/aks/http-application-routing" target="_blank" rel="noopener noreferrer">AKS documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="set-authorized-ip-ranges"></a>Set Authorized IP Ranges<a class="hash-link" href="#set-authorized-ip-ranges" title="Direct link to heading">#</a></h3><p>You can secure access to the Kubernetes API server using <a href="https://docs.microsoft.com/en-us/azure/aks/api-server-authorized-ip-ranges#overview-of-api-server-authorized-ip-ranges" target="_blank" rel="noopener noreferrer">authorized IP address ranges.</a></p><p>The Kubernetes API server exposes the Kubernetes API. This component provides the interaction for management tools, such as kubectl. AKS provides a single-tenant cluster control plane with a dedicated API server. By default, the API server is assigned a public IP address, and you should control access to it using Kubernetes-based or Azure-based RBAC.</p><p>To secure access to the otherwise publicly accessible AKS control plane and API server, you can enable and use authorized IP ranges. These authorized IP ranges only allow defined IP address ranges to communicate with the API server.</p><p>However, even if you use authorized IP address ranges, you should still use Kubernetes RBAC or Azure RBAC to authorize users and the actions they request.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="container-monitoring"></a>Container Monitoring<a class="hash-link" href="#container-monitoring" title="Direct link to heading">#</a></h3><p>Container monitoring gives you performance visibility by collecting memory and processor metrics from controllers, nodes, and containers that are available in Kubernetes through the Metrics API. Container logs are also collected. After you enable monitoring, metrics and logs are automatically collected for you through a containerized version of the Log Analytics agent for Linux. Metrics are written to the metrics store and log data is written to the logs store associated with your <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/logs/log-query-overview" target="_blank" rel="noopener noreferrer">Log Analytics</a> workspace.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="log-analytics-workspace-resource-group"></a>Log Analytics Workspace Resource Group<a class="hash-link" href="#log-analytics-workspace-resource-group" title="Direct link to heading">#</a></h3><p>The <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/overview#resource-groups" target="_blank" rel="noopener noreferrer">resource group</a> containing the Log Analytics Workspace. You must create at least one workspace to use Azure Monitor Logs. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="log-analytics-workspace-name"></a>Log Analytics Workspace Name<a class="hash-link" href="#log-analytics-workspace-name" title="Direct link to heading">#</a></h3><p>Data collected by Azure Monitor Logs is stored in one or more <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/logs/design-logs-deployment" target="_blank" rel="noopener noreferrer">Log Analytics workspaces.</a> The workspace defines the geographic location of the data, access rights defining which users can access data, and configuration settings such as the pricing tier and data retention.</p><p>You must create at least one workspace to use Azure Monitor Logs. A single workspace may be suffxicient for all of your monitoring data, or may choose to create multiple workspaces depending on your requirements. For example, you might have one workspace for your production data and another for testing.</p><p>For more information about Azure Monitor Logs, see the <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/logs/data-platform-logs" target="_blank" rel="noopener noreferrer">Azure documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="support-private-kubernetes-service"></a>Support Private Kubernetes Service<a class="hash-link" href="#support-private-kubernetes-service" title="Direct link to heading">#</a></h3><p>Typically, AKS worker nodes do not get public IPs, regardless of whether the cluster is private. In a private cluster, the control plane does not have a public endpoint.</p><p>Rancher can connect to a private AKS cluster in one of two ways.</p><p>The first way to ensure that Rancher is running on the same <a href="https://docs.microsoft.com/en-us/azure/virtual-network/nat-overview" target="_blank" rel="noopener noreferrer">NAT</a> as the AKS nodes.</p><p>The second way is to run a command to register the cluster with Rancher. Once the cluster is provisioned, you can run the displayed command anywhere you can connect to the clusterâ€™s Kubernetes API. This command is displayed in a pop-up when you provision an AKS cluster with a private API endpoint enabled.</p><p>&gt; <strong>Note:</strong> Please be aware that when registering an existing AKS cluster, the cluster might take some time, possibly hours, to appear in the <code>Cluster To register</code> dropdown list. This outcome will be based on region.</p><p>For more information about connecting to an AKS private cluster, see the <a href="https://docs.microsoft.com/en-us/azure/aks/private-clusters#options-for-connecting-to-the-private-cluster" target="_blank" rel="noopener noreferrer">AKS documentation.</a></p><header><h1>Node Pools</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="mode"></a>Mode<a class="hash-link" href="#mode" title="Direct link to heading">#</a></h3><p>The Azure interface allows users to specify whether a Primary Node Pool relies on either <code>system</code> (normally used for control planes) or <code>user</code> (what is most typically needed for Rancher).</p><p>For Primary Node Pools, you can specify Mode, OS, Count and Size.</p><p>System node pools always require running nodes, so they cannot be scaled below one node. At least one system node pool is required.</p><p>For subsequent node pools, the Rancher UI forces the default of User. User node pools allow you to scale to zero nodes. User node pools don&#x27;t run any part of the Kubernetes controlplane.</p><p>AKS doesn&#x27;t expose the nodes that run the Kubernetes controlplane components.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="availability-zones"></a>Availability Zones<a class="hash-link" href="#availability-zones" title="Direct link to heading">#</a></h3><p><a href="https://docs.microsoft.com/en-us/azure/availability-zones/az-overview" target="_blank" rel="noopener noreferrer">Availability zones</a> are unique physical locations within a region. Each zone is made up of one or more data centers equipped with independent power, cooling, and networking.</p><p>Not all regions have support for availability zones. For a list of Azure regions with availability zones, see the <a href="https://docs.microsoft.com/en-us/azure/availability-zones/az-region#azure-regions-with-availability-zones" target="_blank" rel="noopener noreferrer">Azure documentation.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="vm-size"></a>VM Size<a class="hash-link" href="#vm-size" title="Direct link to heading">#</a></h3><p>Choose a size for each VM in the node pool. For details about each VM size, see <a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux/" target="_blank" rel="noopener noreferrer">this page.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="os-disk-type"></a>OS Disk Type<a class="hash-link" href="#os-disk-type" title="Direct link to heading">#</a></h3><p>The nodes in the node pool can have either managed or ephemeral disks.</p><p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/ephemeral-os-disks" target="_blank" rel="noopener noreferrer">Ephemeral OS disks</a> are created on the local virtual machine storage and not saved to the remote Azure Storage. Ephemeral OS disks work well for stateless workloads, where applications are tolerant of individual VM failures, but are more affected by VM deployment time or reimaging the individual VM instances. With Ephemeral OS disk, you get lower read/write latency to the OS disk and faster VM reimage.</p><p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/managed-disks-overview" target="_blank" rel="noopener noreferrer">Azure managed disks</a> are block-level storage volumes that are managed by Azure and used with Azure Virtual Machines. Managed disks are designed for 99.999% availability. Managed disks achieve this by providing you with three replicas of your data, allowing for high durability.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="os-disk-size"></a>OS Disk Size<a class="hash-link" href="#os-disk-size" title="Direct link to heading">#</a></h3><p>The size in GB for the disk for each node.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="node-count"></a>Node Count<a class="hash-link" href="#node-count" title="Direct link to heading">#</a></h3><p>The number of nodes in the node pool. The maximum number of nodes may be limited by your <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits" target="_blank" rel="noopener noreferrer">Azure subscription.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="max-pods-per-node"></a>Max Pods Per Node<a class="hash-link" href="#max-pods-per-node" title="Direct link to heading">#</a></h3><p>The maximum number of pods per node defaults to 110 with a maximum of 250.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="enable-auto-scaling"></a>Enable Auto Scaling<a class="hash-link" href="#enable-auto-scaling" title="Direct link to heading">#</a></h3><p>When auto scaling is enabled, you will need to enter a minimum and maximum node count.</p><p>When Auto Scaling is enabled, you can&#x27;t manually scale the node pool. The scale is controlled by the AKS autoscaler.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/cluster-admin/editing-clusters/aks-config-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rancher-docusaurus/next/cluster-admin/cluster-autoscaler/index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Cluster Autoscaler</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rancher-docusaurus/next/cluster-admin/editing-clusters/eks-config-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EKS Cluster Configuration Reference Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tenant-id" class="table-of-contents__link">Tenant ID</a></li><li><a href="#subscription-id" class="table-of-contents__link">Subscription ID</a></li><li><a href="#client-id" class="table-of-contents__link">Client ID</a></li><li><a href="#client-secret" class="table-of-contents__link">Client Secret</a></li><li><a href="#environment" class="table-of-contents__link">Environment</a></li><li><a href="#kubernetes-version" class="table-of-contents__link">Kubernetes Version</a></li><li><a href="#cluster-resource-group" class="table-of-contents__link">Cluster Resource Group</a></li><li><a href="#linux-admin-username" class="table-of-contents__link">Linux Admin Username</a></li><li><a href="#ssh-public-key" class="table-of-contents__link">SSH Public Key</a></li><li><a href="#tags" class="table-of-contents__link">Tags</a></li><li><a href="#loadbalancer-sku" class="table-of-contents__link">LoadBalancer SKU</a></li><li><a href="#network-policy" class="table-of-contents__link">Network Policy</a></li><li><a href="#dns-prefix" class="table-of-contents__link">DNS Prefix</a></li><li><a href="#network-plugin" class="table-of-contents__link">Network Plugin</a></li><li><a href="#http-application-routing" class="table-of-contents__link">HTTP Application Routing</a></li><li><a href="#set-authorized-ip-ranges" class="table-of-contents__link">Set Authorized IP Ranges</a></li><li><a href="#container-monitoring" class="table-of-contents__link">Container Monitoring</a></li><li><a href="#log-analytics-workspace-resource-group" class="table-of-contents__link">Log Analytics Workspace Resource Group</a></li><li><a href="#log-analytics-workspace-name" class="table-of-contents__link">Log Analytics Workspace Name</a></li><li><a href="#support-private-kubernetes-service" class="table-of-contents__link">Support Private Kubernetes Service</a></li><li><a href="#mode" class="table-of-contents__link">Mode</a></li><li><a href="#availability-zones" class="table-of-contents__link">Availability Zones</a></li><li><a href="#vm-size" class="table-of-contents__link">VM Size</a></li><li><a href="#os-disk-type" class="table-of-contents__link">OS Disk Type</a></li><li><a href="#os-disk-size" class="table-of-contents__link">OS Disk Size</a></li><li><a href="#node-count" class="table-of-contents__link">Node Count</a></li><li><a href="#max-pods-per-node" class="table-of-contents__link">Max Pods Per Node</a></li><li><a href="#enable-auto-scaling" class="table-of-contents__link">Enable Auto Scaling</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.rancher.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher Website</a></li><li class="footer__item"><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rancher/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js"></script>
<script src="/rancher-docusaurus/assets/js/main.ed945e9c.js"></script>
</body>
</html>