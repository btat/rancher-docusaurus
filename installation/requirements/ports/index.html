<!doctype html>
<html class="docs-version-2.4.15" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Port Requirements | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://btat.github.io/rancher-docusaurus/installation/requirements/ports/index"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.4.15"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.4.15"><meta data-react-helmet="true" property="og:title" content="Port Requirements | My Site"><meta data-react-helmet="true" name="description" content="Read about port requirements needed in order for Rancher to operate properly, both for Rancher nodes and downstream Kubernetes cluster nodes"><meta data-react-helmet="true" property="og:description" content="Read about port requirements needed in order for Rancher to operate properly, both for Rancher nodes and downstream Kubernetes cluster nodes"><link data-react-helmet="true" rel="shortcut icon" href="/rancher-docusaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://btat.github.io/rancher-docusaurus/installation/requirements/ports/index"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/installation/requirements/ports/index" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/installation/requirements/ports/index" hreflang="x-default"><link rel="stylesheet" href="/rancher-docusaurus/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js" as="script">
<link rel="preload" href="/rancher-docusaurus/assets/js/main.ed945e9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rancher-docusaurus/"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Rancher Docs</b></a><a href="https://suse-projects.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>More SUSE Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rancher Deployment Quick Start Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Installing/Upgrading Rancher</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/installation/index">Intro</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">install-rancher-on-k8s</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">other-installation-methods</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">requirements</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/installation/requirements/index">Installation Requirements</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/installation/requirements/installing-docker">Installing Docker</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">ports</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/installation/requirements/ports/common-ports-table">common-ports-table</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rancher-docusaurus/installation/requirements/ports/index">Port Requirements</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">resources</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Backups and Disaster Recovery</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Authentication, Permissions and Global Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setting up Kubernetes Clusters in Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cluster Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pipelines</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Istio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logging</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CIS Scans</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Settings</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/cli">Using the Rancher Command Line Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/contributing">Contributing to Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/helm-charts">Helm Charts in Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/longhorn">Longhorn - Cloud native distributed block storage for Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/opa-gatekeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/system-tools">System Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.4.15</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Port Requirements</h1></header><p>To operate properly, Rancher requires a number of ports to be open on Rancher nodes and on downstream Kubernetes cluster nodes.</p><ul><li><a href="#rancher-nodes">Rancher Nodes</a><ul><li><a href="#ports-for-rancher-server-nodes-on-k3s">Ports for Rancher Server Nodes on K3s</a></li><li><a href="#ports-for-rancher-server-nodes-on-rke">Ports for Rancher Server Nodes on RKE</a></li><li><a href="#ports-for-rancher-server-nodes-on-rke2">Ports for Rancher Server Nodes on RKE2</a></li><li><a href="#ports-for-rancher-server-in-docker">Ports for Rancher Server in Docker</a></li></ul></li><li><a href="#downstream-kubernetes-cluster-nodes">Downstream Kubernetes Cluster Nodes</a><ul><li><a href="#ports-for-rancher-launched-kubernetes-clusters-using-node-pools">Ports for Rancher Launched Kubernetes Clusters using Node Pools</a></li><li><a href="#ports-for-rancher-launched-kubernetes-clusters-using-custom-nodes">Ports for Rancher Launched Kubernetes Clusters using Custom Nodes</a></li><li><a href="#ports-for-hosted-kubernetes-clusters">Ports for Hosted Kubernetes Clusters</a></li><li><a href="#ports-for-registered-clusters">Ports for Registered Clusters</a></li></ul></li><li><a href="#other-port-considerations">Other Port Considerations</a><ul><li><a href="#commonly-used-ports">Commonly Used Ports</a></li><li><a href="#local-node-traffic">Local Node Traffic</a></li><li><a href="#rancher-aws-ec2-security-group">Rancher AWS EC2 Security Group</a></li><li><a href="#opening-suse-linux-ports">Opening SUSE Linux Ports</a></li></ul></li></ul><header><h1>Rancher Nodes</h1></header><p>The following table lists the ports that need to be open to and from nodes that are running the Rancher server.</p><p>The port requirements differ based on the Rancher server architecture.</p><p>Rancher can be installed on any Kubernetes cluster. For Rancher installs on a K3s, RKE, or RKE2 Kubernetes cluster, refer to the tabs below. For other Kubernetes distributions, refer to the distribution&#x27;s documentation for the port requirements for cluster nodes.</p><p>&gt; <strong>Notes:</strong>
&gt;
&gt; - Rancher nodes may also require additional outbound access for any external authentication provider which is configured (LDAP for example).
&gt; - Kubernetes recommends TCP 30000-32767 for node port services.
&gt; - For firewalls, traffic may need to be enabled within the cluster and pod CIDR.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-server-nodes-on-k3s"></a>Ports for Rancher Server Nodes on K3s<a class="hash-link" href="#ports-for-rancher-server-nodes-on-k3s" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The K3s server needs port 6443 to be accessible by the nodes.</p><p>The nodes need to be able to reach other nodes over UDP port 8472 when Flannel VXLAN is used. The node should not listen on any other port. K3s uses reverse tunneling such that the nodes make outbound connections to the server and all kubelet traffic runs through that tunnel. However, if you do not use Flannel and provide your own custom CNI, then port 8472 is not needed by K3s.</p><p>If you wish to utilize the metrics server, you will need to open port 10250 on each node.</p><p>&gt; <strong>Important:</strong> The VXLAN port on nodes should not be exposed to the world as it opens up your cluster network to be accessed by anyone. Run your nodes behind a firewall/security group that disables access to port 8472.</p><p>The following tables break down the port requirements for inbound and outbound traffic:</p><p>\&lt;figcaption&gt;Inbound Rules for Rancher Server Nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>80</td><td>Load balancer/proxy that does external SSL termination</td><td>Rancher UI/API when external SSL termination is used</td></tr><tr><td>TCP</td><td>443</td><td>server nodes, agent nodes, hosted/registered Kubernetes, any source that needs to be able to use the Rancher UI or API</td><td>Rancher agent, Rancher UI/API, kubectl</td></tr><tr><td>TCP</td><td>6443</td><td>K3s server nodes</td><td>Kubernetes API</td></tr><tr><td>UDP</td><td>8472</td><td>K3s server and agent nodes</td><td>Required only for Flannel VXLAN.</td></tr><tr><td>TCP</td><td>10250</td><td>K3s server and agent nodes</td><td>kubelet</td></tr></tbody></table><p>\&lt;figcaption&gt;Outbound Rules for Rancher Nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>22</td><td>Any node IP from a node created using Node Driver</td><td>SSH provisioning of nodes using Node Driver</td></tr><tr><td>TCP</td><td>443</td><td>git.rancher.io</td><td>Rancher catalog</td></tr><tr><td>TCP</td><td>2376</td><td>Any node IP from a node created using Node driver</td><td>Docker daemon TLS port used by Docker Machine</td></tr><tr><td>TCP</td><td>6443</td><td>Hosted/Imported Kubernetes API</td><td>Kubernetes API server</td></tr></tbody></table><p>{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-server-nodes-on-rke"></a>Ports for Rancher Server Nodes on RKE<a class="hash-link" href="#ports-for-rancher-server-nodes-on-rke" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>Typically Rancher is installed on three RKE nodes that all have the etcd, control plane and worker roles.</p><p>The following tables break down the port requirements for traffic between the Rancher nodes:</p><p>\&lt;figcaption&gt;Rules for traffic between Rancher nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>443</td><td>Rancher agents</td></tr><tr><td>TCP</td><td>2379</td><td>etcd client requests</td></tr><tr><td>TCP</td><td>2380</td><td>etcd peer communication</td></tr><tr><td>TCP</td><td>6443</td><td>Kubernetes apiserver</td></tr><tr><td>UDP</td><td>8472</td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10250</td><td>Metrics server communication with all nodes</td></tr><tr><td>TCP</td><td>10254</td><td>Ingress controller livenessProbe/readinessProbe</td></tr></tbody></table><p>The following tables break down the port requirements for inbound and outbound traffic:</p><p>\&lt;figcaption&gt;Inbound Rules for Rancher Nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>22</td><td>RKE CLI</td><td>SSH provisioning of node by RKE</td></tr><tr><td>TCP</td><td>80</td><td>Load Balancer/Reverse Proxy</td><td>HTTP traffic to Rancher UI/API</td></tr><tr><td>TCP</td><td>443</td><td>Load Balancer/Reverse Proxy, IPs of all cluster nodes and other API/UI clients</td><td>HTTPS traffic to Rancher UI/API</td></tr><tr><td>TCP</td><td>6443</td><td>Kubernetes API clients</td><td>HTTPS traffic to Kubernetes API</td></tr></tbody></table><p>\&lt;figcaption&gt;Outbound Rules for Rancher Nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>443</td><td><code>35.160.43.145</code>,<code>35.167.242.46</code>,<code>52.33.59.17</code></td><td>Rancher catalog (git.rancher.io)</td></tr><tr><td>TCP</td><td>22</td><td>Any node created using a node driver</td><td>SSH provisioning of node by node driver</td></tr><tr><td>TCP</td><td>2376</td><td>Any node created using a node driver</td><td>Docker daemon TLS port used by node driver</td></tr><tr><td>TCP</td><td>6443</td><td>Hosted/Imported Kubernetes API</td><td>Kubernetes API server</td></tr><tr><td>TCP</td><td>Provider dependent</td><td>Port of the Kubernetes API endpoint in hosted cluster</td><td>Kubernetes API</td></tr></tbody></table><p>{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-server-nodes-on-rke2"></a>Ports for Rancher Server Nodes on RKE2<a class="hash-link" href="#ports-for-rancher-server-nodes-on-rke2" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The RKE2 server needs port 6443 and 9345 to be accessible by other nodes in the cluster.</p><p>All nodes need to be able to reach other nodes over UDP port 8472 when Flannel VXLAN is used.</p><p>If you wish to utilize the metrics server, you will need to open port 10250 on each node.</p><p><strong>Important:</strong> The VXLAN port on nodes should not be exposed to the world as it opens up your cluster network to be accessed by anyone. Run your nodes behind a firewall/security group that disables access to port 8472.</p><p>\&lt;figcaption&gt;Inbound Rules for RKE2 Server Nodes\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>9345</td><td>RKE2 agent nodes</td><td>Kubernetes API</td></tr><tr><td>TCP</td><td>6443</td><td>RKE2 agent nodes</td><td>Kubernetes API</td></tr><tr><td>UDP</td><td>8472</td><td>RKE2 server and agent nodes</td><td>Required only for Flannel VXLAN</td></tr><tr><td>TCP</td><td>10250</td><td>RKE2 server and agent nodes</td><td>kubelet</td></tr><tr><td>TCP</td><td>2379</td><td>RKE2 server nodes</td><td>etcd client port</td></tr><tr><td>TCP</td><td>2380</td><td>RKE2 server nodes</td><td>etcd peer port</td></tr><tr><td>TCP</td><td>30000-32767</td><td>RKE2 server and agent nodes</td><td>NodePort port range</td></tr><tr><td>TCP</td><td>5473</td><td>Calico-node pod connecting to typha pod</td><td>Required when deploying with Calico</td></tr><tr><td>HTTP</td><td>8080</td><td>Load balancer/proxy that does external SSL termination</td><td>Rancher UI/API when external SSL termination is used</td></tr><tr><td>HTTPS</td><td>8443</td><td>hosted/registered Kubernetes, any source that needs to be able to use the Rancher UI or API</td><td>Rancher agent, Rancher UI/API, kubectl. Not needed if you have LB doing TLS termination.</td></tr></tbody></table><p>Typically all outbound traffic is allowed.
{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-server-in-docker"></a>Ports for Rancher Server in Docker<a class="hash-link" href="#ports-for-rancher-server-in-docker" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The following tables break down the port requirements for Rancher nodes, for inbound and outbound traffic:</p><p>\&lt;figcaption&gt;Inbound Rules for Rancher Node\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>80</td><td>Load balancer/proxy that does external SSL termination</td><td>Rancher UI/API when external SSL termination is used</td></tr><tr><td>TCP</td><td>443</td><td>hosted/registered Kubernetes, any source that needs to be able to use the Rancher UI or API</td><td>Rancher agent, Rancher UI/API, kubectl</td></tr></tbody></table><p>\&lt;figcaption&gt;Outbound Rules for Rancher Node\&lt;/figcaption&gt;</p><table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>22</td><td>Any node IP from a node created using Node Driver</td><td>SSH provisioning of nodes using Node Driver</td></tr><tr><td>TCP</td><td>443</td><td>git.rancher.io</td><td>Rancher catalog</td></tr><tr><td>TCP</td><td>2376</td><td>Any node IP from a node created using a node driver</td><td>Docker daemon TLS port used by Docker Machine</td></tr><tr><td>TCP</td><td>6443</td><td>Hosted/Imported Kubernetes API</td><td>Kubernetes API server</td></tr></tbody></table><p>{{% /accordion %}}</p><header><h1>Downstream Kubernetes Cluster Nodes</h1></header><p>Downstream Kubernetes clusters run your apps and services. This section describes what ports need to be opened on the nodes in downstream clusters so that Rancher can communicate with them.</p><p>The port requirements differ depending on how the downstream cluster was launched. Each of the tabs below list the ports that need to be opened for different <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/" target="_blank" rel="noopener noreferrer">cluster types</a>.</p><p>The following diagram depicts the ports that are opened for each <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning" target="_blank" rel="noopener noreferrer">cluster type</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly img"><pre tabindex="0" class="prism-code language-img codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;figcaption\&gt;Port Requirements for the Rancher Management Plane\&lt;/figcaption\&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">![Basic Port Requirements](./assets/img/rancher/port-communications.svg)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>&gt;<strong>Tip:</strong>
&gt;
&gt;If security isn&#x27;t a large concern and you&#x27;re okay with opening a few additional ports, you can use the table in <a href="#commonly-used-ports">Commonly Used Ports</a> as your port reference instead of the comprehensive tables below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-launched-kubernetes-clusters-using-node-pools"></a>Ports for Rancher Launched Kubernetes Clusters using Node Pools<a class="hash-link" href="#ports-for-rancher-launched-kubernetes-clusters-using-node-pools" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The following table depicts the port requirements for <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/" target="_blank" rel="noopener noreferrer">Rancher Launched Kubernetes</a> with nodes created in an <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/" target="_blank" rel="noopener noreferrer">Infrastructure Provider</a>.</p><p>&gt;<strong>Note:</strong>
&gt;The required ports are automatically opened by Rancher during creation of clusters in cloud providers like Amazon EC2 or DigitalOcean.</p><p>{{ ports-iaas-nodes }}</p><p>{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-rancher-launched-kubernetes-clusters-using-custom-nodes"></a>Ports for Rancher Launched Kubernetes Clusters using Custom Nodes<a class="hash-link" href="#ports-for-rancher-launched-kubernetes-clusters-using-custom-nodes" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The following table depicts the port requirements for <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/" target="_blank" rel="noopener noreferrer">Rancher Launched Kubernetes</a> with <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/custom-nodes/" target="_blank" rel="noopener noreferrer">Custom Nodes</a>.</p><p>{{ ports-custom-nodes }}</p><p>{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-hosted-kubernetes-clusters"></a>Ports for Hosted Kubernetes Clusters<a class="hash-link" href="#ports-for-hosted-kubernetes-clusters" title="Direct link to heading">#</a></h3><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The following table depicts the port requirements for <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/hosted-kubernetes-clusters" target="_blank" rel="noopener noreferrer">hosted clusters</a>.</p><p>{{ ports-imported-hosted }}</p><p>{{% /accordion %}}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ports-for-registered-clusters"></a>Ports for Registered Clusters<a class="hash-link" href="#ports-for-registered-clusters" title="Direct link to heading">#</a></h3><p>Note: Registered clusters were called imported clusters before Rancher v2.5.</p><p>{{% accordion label=&quot;Click to expand&quot; %}}</p><p>The following table depicts the port requirements for <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/registered-clusters/" target="_blank" rel="noopener noreferrer">registered clusters</a>.</p><p>{{ ports-imported-hosted }}</p><p>{{% /accordion %}}</p><header><h1>Other Port Considerations</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="commonly-used-ports"></a>Commonly Used Ports<a class="hash-link" href="#commonly-used-ports" title="Direct link to heading">#</a></h3><p>These ports are typically opened on your Kubernetes nodes, regardless of what type of cluster it is.</p><p>{{% include file=&quot;/rancher/v2.6/en/installation/requirements/ports/common-ports-table&quot; %}}</p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="local-node-traffic"></a>Local Node Traffic<a class="hash-link" href="#local-node-traffic" title="Direct link to heading">#</a></h3><p>Ports marked as <code>local traffic</code> (i.e., <code>9099 TCP</code>) in the above requirements are used for Kubernetes healthchecks (<code>livenessProbe</code> and<code>readinessProbe</code>).
These healthchecks are executed on the node itself. In most cloud environments, this local traffic is allowed by default.</p><p>However, this traffic may be blocked when:</p><ul><li>You have applied strict host firewall policies on the node.</li><li>You are using nodes that have multiple interfaces (multihomed).</li></ul><p>In these cases, you have to explicitly allow this traffic in your host firewall, or in case of public/private cloud hosted machines (i.e. AWS or OpenStack), in your security group configuration. Keep in mind that when using a security group as source or destination in your security group, explicitly opening ports only applies to the private interface of the nodes / instances.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="rancher-aws-ec2-security-group"></a>Rancher AWS EC2 Security Group<a class="hash-link" href="#rancher-aws-ec2-security-group" title="Direct link to heading">#</a></h3><p>When using the <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/ec2/" target="_blank" rel="noopener noreferrer">AWS EC2 node driver</a> to provision cluster nodes in Rancher, you can choose to let Rancher create a security group called <code>rancher-nodes</code>. The following rules are automatically added to this security group.</p><table><thead><tr><th>Type</th><th align="center">Protocol</th><th align="center">Port Range</th><th>Source/Destination</th><th align="center">Rule Type</th></tr></thead><tbody><tr><td>SSH</td><td align="center">TCP</td><td align="center">22</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>HTTP</td><td align="center">TCP</td><td align="center">80</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">443</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">2376</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">2379-2380</td><td>sg-xxx (rancher-nodes)</td><td align="center">Inbound</td></tr><tr><td>Custom UDP Rule</td><td align="center">UDP</td><td align="center">4789</td><td>sg-xxx (rancher-nodes)</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">6443</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>Custom UDP Rule</td><td align="center">UDP</td><td align="center">8472</td><td>sg-xxx (rancher-nodes)</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">10250-10252</td><td>sg-xxx (rancher-nodes)</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">10256</td><td>sg-xxx (rancher-nodes)</td><td align="center">Inbound</td></tr><tr><td>Custom TCP Rule</td><td align="center">TCP</td><td align="center">30000-32767</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>Custom UDP Rule</td><td align="center">UDP</td><td align="center">30000-32767</td><td>0.0.0.0/0</td><td align="center">Inbound</td></tr><tr><td>All traffic</td><td align="center">All</td><td align="center">All</td><td>0.0.0.0/0</td><td align="center">Outbound</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="opening-suse-linux-ports"></a>Opening SUSE Linux Ports<a class="hash-link" href="#opening-suse-linux-ports" title="Direct link to heading">#</a></h3><p>SUSE Linux may have a firewall that blocks all ports by default. To open the ports needed for adding the host to a custom cluster,</p><p>{{% tabs %}}
{{% tab &quot;SLES 15 / openSUSE Leap 15&quot; %}}</p><ol><li>SSH into the instance.</li><li>Start YaST in text mode:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sudo yast2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol><li>Navigate to <strong>Security and Users</strong> &gt; <strong>Firewall</strong> &gt; <strong>Zones:public</strong> &gt; <strong>Ports</strong>. To navigate within the interface, follow the instructions <a href="https://doc.opensuse.org/documentation/leap/reference/html/book.opensuse.reference/cha-yast-text.html#sec-yast-cli-navigate" target="_blank" rel="noopener noreferrer">here</a>.</li><li>To open the required ports, enter them into the <strong>TCP Ports</strong> and <strong>UDP Ports</strong> fields. In this example, ports 9796 and 10250 are also opened for monitoring. The resulting fields should look similar to the following:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">TCP Ports</span></span><span class="token-line" style="color:#393A34"><span class="token plain">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2376</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2379</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2380</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6443</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9099</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9796</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10250</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10254</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 30000</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">32767</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">UDP Ports</span></span><span class="token-line" style="color:#393A34"><span class="token plain">8472</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 30000</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">32767</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol><li>When all required ports are enter, select <strong>Accept</strong>.</li></ol><p>{{% /tab %}}
{{% tab &quot;SLES 12 / openSUSE Leap 42&quot; %}}</p><ol><li>SSH into the instance.</li><li>Edit /<code>etc/sysconfig/SuSEfirewall2</code> and open the required ports. In this example, ports 9796 and 10250 are also opened for monitoring:<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">FW_SERVICES_EXT_TCP=&quot;22 80 443 2376 2379 2380 6443 9099 9796 10250 10254 30000:32767&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FW_SERVICES_EXT_UDP=&quot;8472 30000:32767&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FW_ROUTE=yes</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Restart the firewall with the new ports:<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">SuSEfirewall2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div>{{% /tab %}}
{{% /tabs %}}</li></ol><p><strong>Result:</strong> The node has the open ports required to be added to a custom cluster.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/versioned_docs/version-2.4.15/installation/requirements/ports/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rancher-docusaurus/installation/requirements/ports/common-ports-table"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« common-ports-table</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rancher-docusaurus/installation/resources/advanced/api-audit-log"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enabling the API Audit Log to Record System Events Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ports-for-rancher-server-nodes-on-k3s" class="table-of-contents__link">Ports for Rancher Server Nodes on K3s</a></li><li><a href="#ports-for-rancher-server-nodes-on-rke" class="table-of-contents__link">Ports for Rancher Server Nodes on RKE</a></li><li><a href="#ports-for-rancher-server-nodes-on-rke2" class="table-of-contents__link">Ports for Rancher Server Nodes on RKE2</a></li><li><a href="#ports-for-rancher-server-in-docker" class="table-of-contents__link">Ports for Rancher Server in Docker</a></li><li><a href="#ports-for-rancher-launched-kubernetes-clusters-using-node-pools" class="table-of-contents__link">Ports for Rancher Launched Kubernetes Clusters using Node Pools</a></li><li><a href="#ports-for-rancher-launched-kubernetes-clusters-using-custom-nodes" class="table-of-contents__link">Ports for Rancher Launched Kubernetes Clusters using Custom Nodes</a></li><li><a href="#ports-for-hosted-kubernetes-clusters" class="table-of-contents__link">Ports for Hosted Kubernetes Clusters</a></li><li><a href="#ports-for-registered-clusters" class="table-of-contents__link">Ports for Registered Clusters</a></li><li><a href="#commonly-used-ports" class="table-of-contents__link">Commonly Used Ports</a></li><li><a href="#local-node-traffic" class="table-of-contents__link">Local Node Traffic</a></li><li><a href="#rancher-aws-ec2-security-group" class="table-of-contents__link">Rancher AWS EC2 Security Group</a></li><li><a href="#opening-suse-linux-ports" class="table-of-contents__link">Opening SUSE Linux Ports</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.rancher.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher Website</a></li><li class="footer__item"><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rancher/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js"></script>
<script src="/rancher-docusaurus/assets/js/main.ed945e9c.js"></script>
</body>
</html>