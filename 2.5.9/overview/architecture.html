<!doctype html>
<html class="docs-version-2.5.9" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Architecture | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://btat.github.io/rancher-docusaurus/2.5.9/overview/architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.5.9"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.5.9"><meta data-react-helmet="true" property="og:title" content="Architecture | My Site"><meta data-react-helmet="true" name="description" content="This section focuses on the Rancher server, its components, and how Rancher communicates with downstream Kubernetes clusters."><meta data-react-helmet="true" property="og:description" content="This section focuses on the Rancher server, its components, and how Rancher communicates with downstream Kubernetes clusters."><link data-react-helmet="true" rel="shortcut icon" href="/rancher-docusaurus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://btat.github.io/rancher-docusaurus/2.5.9/overview/architecture"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/2.5.9/overview/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://btat.github.io/rancher-docusaurus/2.5.9/overview/architecture" hreflang="x-default"><link rel="stylesheet" href="/rancher-docusaurus/assets/css/styles.6d09dbb1.css">
<link rel="preload" href="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js" as="script">
<link rel="preload" href="/rancher-docusaurus/assets/js/main.ed945e9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rancher-docusaurus/"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rancher-docusaurus/img/rancher-logo.svg" alt="Rancher Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Rancher Docs</b></a><a href="https://suse-projects.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>More SUSE Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/2.5.9/overview/architecture-recommendations">Architecture Recommendations</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rancher-docusaurus/2.5.9/overview/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/2.5.9/overview/concepts">Kubernetes Concepts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rancher-docusaurus/2.5.9/overview/index">Intro</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rancher Deployment Quick Start Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installing/Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Backups and Disaster Recovery</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Authentication, Permissions and Global Configuration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setting up Kubernetes Clusters in Rancher</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cluster Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pipelines</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deploying Applications across Clusters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Istio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logging</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CIS Scans</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Settings</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/cli">Using the Rancher Command Line Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/contributing">Contributing to Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/helm-charts">Helm Charts in Rancher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9">Rancher 2.6</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/longhorn">Longhorn - Cloud native distributed block storage for Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/opa-gatekeper">OPA Gatekeeper</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rancher-docusaurus/2.5.9/system-tools">System Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for My Site <b>2.5.9</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rancher-docusaurus/overview/architecture">latest version</a></b> (2.4.15).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.5.9</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header><p>This section focuses on the Rancher server, its components, and how Rancher communicates with downstream Kubernetes clusters.</p><p>For information on the different ways that Rancher can be installed, refer to the <a href="https://rancher.com/docs/rancher/v2.6/en/installation/#overview-of-installation-options" target="_blank" rel="noopener noreferrer">overview of installation options.</a></p><p>For a list of main features of the Rancher API server, refer to the <a href="https://rancher.com/docs/rancher/v2.6/en/overview/#features-of-the-rancher-api-server" target="_blank" rel="noopener noreferrer">overview section.</a></p><p>For guidance about setting up the underlying infrastructure for the Rancher server, refer to the <a href="https://rancher.com/docs/rancher/v2.6/en/overview/architecture-recommendations" target="_blank" rel="noopener noreferrer">architecture recommendations.</a></p><p>&gt; This section assumes a basic familiarity with Docker and Kubernetes. For a brief explanation of how Kubernetes components work together, refer to the <a href="https://rancher.com/docs/rancher/v2.6/en/overview/concepts" target="_blank" rel="noopener noreferrer">concepts</a> page.</p><header><h1>Rancher Server Architecture</h1></header><p>The majority of Rancher 2.x software runs on the Rancher Server. Rancher Server includes all the software components used to manage the entire Rancher deployment.</p><p>The figure below illustrates the high-level architecture of Rancher 2.x. The figure depicts a Rancher Server installation that manages two downstream Kubernetes clusters: one created by RKE and another created by Amazon EKS (Elastic Kubernetes Service).</p><p>For the best performance and security, we recommend a dedicated Kubernetes cluster for the Rancher management server. Running user workloads on this cluster is not advised. After deploying Rancher, you can <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/" target="_blank" rel="noopener noreferrer">create or import clusters</a> for running your workloads.</p><p>The diagram below shows how users can manipulate both <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/" target="_blank" rel="noopener noreferrer">Rancher-launched Kubernetes</a> clusters and <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/hosted-kubernetes-clusters/" target="_blank" rel="noopener noreferrer">hosted Kubernetes</a> clusters through Rancher&#x27;s authentication proxy:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly img"><pre tabindex="0" class="prism-code language-img codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;figcaption\&gt;Managing Kubernetes Clusters through Rancher&#x27;s Authentication Proxy\&lt;/figcaption\&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">![Architecture](./assets/img/rancher/rancher-architecture-rancher-api-server.svg)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can install Rancher on a single node, or on a high-availability Kubernetes cluster.</p><p>A high-availability Kubernetes installation is recommended for production.</p><p>A Docker installation of Rancher is recommended only for development and testing purposes. The ability to migrate Rancher to a high-availability cluster depends on the Rancher version:</p><p>The Rancher backup operator can be used to migrate Rancher from the single Docker container install to an installation on a high-availability Kubernetes cluster. For details, refer to the documentation on <a href="https://rancher.com/docs/rancher/v2.6/en/backups/migrating-rancher" target="_blank" rel="noopener noreferrer">migrating Rancher to a new cluster.</a></p><p>The Rancher server, regardless of the installation method, should always run on nodes that are separate from the downstream user clusters that it manages. If Rancher is installed on a high-availability Kubernetes cluster, it should run on a separate cluster from the cluster(s) it manages.</p><header><h1>Communicating with Downstream User Clusters</h1></header><p>This section describes how Rancher provisions and manages the downstream user clusters that run your apps and services.</p><p>The below diagram shows how the cluster controllers, cluster agents, and node agents allow Rancher to control downstream clusters.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly img"><pre tabindex="0" class="prism-code language-img codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;figcaption\&gt;Communicating with Downstream Clusters\&lt;/figcaption\&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">![Rancher Components](./assets/img/rancher/rancher-architecture-cluster-controller.svg)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The following descriptions correspond to the numbers in the diagram above:</p><ol><li><a href="#1-the-authentication-proxy">The Authentication Proxy</a></li><li><a href="#2-cluster-controllers-and-cluster-agents">Cluster Controllers and Cluster Agents</a></li><li><a href="#3-node-agents">Node Agents</a></li><li><a href="#4-authorized-cluster-endpoint">Authorized Cluster Endpoint</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1-the-authentication-proxy"></a>1. The Authentication Proxy<a class="hash-link" href="#1-the-authentication-proxy" title="Direct link to heading">#</a></h3><p>In this diagram, a user named Bob wants to see all pods running on a downstream user cluster called User Cluster 1. From within Rancher, he can run a <code>kubectl</code> command to see
the pods. Bob is authenticated through Rancher&#x27;s authentication proxy.</p><p>The authentication proxy forwards all Kubernetes API calls to downstream clusters. It integrates with authentication services like local authentication, Active Directory, and GitHub. On every Kubernetes API call, the authentication proxy authenticates the caller and sets the proper Kubernetes impersonation headers before forwarding the call to Kubernetes masters.</p><p>Rancher communicates with Kubernetes clusters using a <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/" target="_blank" rel="noopener noreferrer">service account,</a> which provides an identity for processes that run in a pod.</p><p>By default, Rancher generates a <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-admin/cluster-access/kubectl/" target="_blank" rel="noopener noreferrer">kubeconfig file</a> that contains credentials for proxying through the Rancher server to connect to the Kubernetes API server on a downstream user cluster. The kubeconfig file (<code>kube_config_rancher-cluster.yml</code>) contains full access to the cluster.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2-cluster-controllers-and-cluster-agents"></a>2. Cluster Controllers and Cluster Agents<a class="hash-link" href="#2-cluster-controllers-and-cluster-agents" title="Direct link to heading">#</a></h3><p>Each downstream user cluster has a cluster agent, which opens a tunnel to the corresponding cluster controller within the Rancher server.</p><p>There is one cluster controller and one cluster agent for each downstream cluster. Each cluster controller:</p><ul><li>Watches for resource changes in the downstream cluster</li><li>Brings the current state of the downstream cluster to the desired state</li><li>Configures access control policies to clusters and projects</li><li>Provisions clusters by calling the required Docker machine drivers and Kubernetes engines, such as RKE and GKE</li></ul><p>By default, to enable Rancher to communicate with a downstream cluster, the cluster controller connects to the cluster agent. If the cluster agent is not available, the cluster controller can connect to a <a href="#3-node-agents">node agent</a> instead.</p><p>The cluster agent, also called <code>cattle-cluster-agent</code>, is a component that runs in a downstream user cluster. It performs the following tasks:</p><ul><li>Connects to the Kubernetes API of Rancher-launched Kubernetes clusters</li><li>Manages workloads, pod creation and deployment within each cluster</li><li>Applies the roles and bindings defined in each cluster&#x27;s global policies</li><li>Communicates between the cluster and Rancher server (through a tunnel to the cluster controller) about events, stats, node info, and health</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="3-node-agents"></a>3. Node Agents<a class="hash-link" href="#3-node-agents" title="Direct link to heading">#</a></h3><p>If the cluster agent (also called <code>cattle-cluster-agent</code>) is not available, one of the node agents creates a tunnel to the cluster controller to communicate with Rancher.</p><p>The <code>cattle-node-agent</code> is deployed using a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" target="_blank" rel="noopener noreferrer">DaemonSet</a> resource to make sure it runs on every node in a Rancher-launched Kubernetes cluster. It is used to interact with the nodes when performing cluster operations. Examples of cluster operations include upgrading the Kubernetes version and creating or restoring etcd snapshots.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="4-authorized-cluster-endpoint"></a>4. Authorized Cluster Endpoint<a class="hash-link" href="#4-authorized-cluster-endpoint" title="Direct link to heading">#</a></h3><p>An authorized cluster endpoint allows users to connect to the Kubernetes API server of a downstream cluster without having to route their requests through the Rancher authentication proxy.</p><p>&gt; The authorized cluster endpoint only works on Rancher-launched Kubernetes clusters. In other words, it only works in clusters where Rancher <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters" target="_blank" rel="noopener noreferrer">used RKE</a> to provision the cluster. It is not available for registered clusters, or for clusters in a hosted Kubernetes provider, such as Amazon&#x27;s EKS.</p><p>There are two main reasons why a user might need the authorized cluster endpoint:</p><ul><li>To access a downstream user cluster while Rancher is down</li><li>To reduce latency in situations where the Rancher server and downstream cluster are separated by a long distance</li></ul><p>The <code>kube-api-auth</code> microservice is deployed to provide the user authentication functionality for the authorized cluster endpoint. When you access the user cluster using <code>kubectl</code>, the cluster&#x27;s Kubernetes API server authenticates you by using the <code>kube-api-auth</code> service as a webhook.</p><p>Like the authorized cluster endpoint, the <code>kube-api-auth</code> authentication service is also only available for Rancher-launched Kubernetes clusters.</p><p>&gt; <strong>Example scenario:</strong> Let&#x27;s say that the Rancher server is located in the United States, and User Cluster 1 is located in Australia. A user, Alice, also lives in Australia. Alice can manipulate resources in User Cluster 1 by using the Rancher UI, but her requests will have to be sent from Australia to the Rancher server in the United States, then be proxied back to Australia, where the downstream user cluster is. The geographical distance may cause significant latency, which Alice can reduce by using the authorized cluster endpoint.</p><p>With this endpoint enabled for the downstream cluster, Rancher generates an extra Kubernetes context in the kubeconfig file in order to connect directly to the cluster. This file has the credentials for <code>kubectl</code> and <code>helm</code>. </p><p>You will need to use a context defined in this kubeconfig file to access the cluster if Rancher goes down. Therefore, we recommend exporting the kubeconfig file so that if Rancher goes down, you can still use the credentials in the file to access your cluster. For more information, refer to the section on accessing your cluster with <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-admin/cluster-access/kubectl" target="_blank" rel="noopener noreferrer">kubectl and the kubeconfig file.</a></p><header><h1>Important Files</h1></header><p>The files mentioned below are needed to maintain, troubleshoot and upgrade your cluster:</p><ul><li><code>rancher-cluster.yml</code>: The RKE cluster configuration file.</li><li><code>kube_config_rancher-cluster.yml</code>: The Kubeconfig file for the cluster, this file contains credentials for full access to the cluster. You can use this file to authenticate with a Rancher-launched Kubernetes cluster if Rancher goes down.</li><li><code>rancher-cluster.rkestate</code>: The Kubernetes cluster state file. This file contains credentials for full access to the cluster. Note: This state file is only created when using RKE v0.2.0 or higher.</li></ul><p>&gt; <strong>Note:</strong> The &quot;rancher-cluster&quot; parts of the two latter file names are dependent on how you name the RKE cluster configuration file.</p><p>For more information on connecting to a cluster without the Rancher authentication proxy and other configuration options, refer to the <a href="https://rancher.com/docs/rancher/v2.6/en/cluster-admin/cluster-access/kubectl/" target="_blank" rel="noopener noreferrer">kubeconfig file</a> documentation.</p><header><h1>Tools for Provisioning Kubernetes Clusters</h1></header><p>The tools that Rancher uses to provision downstream user clusters depends on the type of cluster that is being provisioned.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="rancher-launched-kubernetes-for-nodes-hosted-in-an-infrastructure-provider"></a>Rancher Launched Kubernetes for Nodes Hosted in an Infrastructure Provider<a class="hash-link" href="#rancher-launched-kubernetes-for-nodes-hosted-in-an-infrastructure-provider" title="Direct link to heading">#</a></h3><p>Rancher can dynamically provision nodes in a provider such as Amazon EC2, DigitalOcean, Azure, or vSphere, then install Kubernetes on them.</p><p>Rancher provisions this type of cluster using <a href="https://github.com/rancher/rke" target="_blank" rel="noopener noreferrer">RKE</a> and <a href="https://github.com/rancher/machine" target="_blank" rel="noopener noreferrer">docker-machine.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="rancher-launched-kubernetes-for-custom-nodes"></a>Rancher Launched Kubernetes for Custom Nodes<a class="hash-link" href="#rancher-launched-kubernetes-for-custom-nodes" title="Direct link to heading">#</a></h3><p>When setting up this type of cluster, Rancher installs Kubernetes on existing nodes, which creates a custom cluster.</p><p>Rancher provisions this type of cluster using <a href="https://github.com/rancher/rke" target="_blank" rel="noopener noreferrer">RKE.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="hosted-kubernetes-providers"></a>Hosted Kubernetes Providers<a class="hash-link" href="#hosted-kubernetes-providers" title="Direct link to heading">#</a></h3><p>When setting up this type of cluster, Kubernetes is installed by providers such as Google Kubernetes Engine, Amazon Elastic Container Service for Kubernetes, or Azure Kubernetes Service.</p><p>Rancher provisions this type of cluster using <a href="https://github.com/rancher/kontainer-engine" target="_blank" rel="noopener noreferrer">kontainer-engine.</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="registered-kubernetes-clusters"></a>Registered Kubernetes Clusters<a class="hash-link" href="#registered-kubernetes-clusters" title="Direct link to heading">#</a></h3><p>In this type of cluster, Rancher connects to a Kubernetes cluster that has already been set up. Therefore, Rancher does not provision Kubernetes, but only sets up the Rancher agents to communicate with the cluster.</p><header><h1>Rancher Server Components and Source Code</h1></header><p>This diagram shows each component that the Rancher server is composed of:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly img"><pre tabindex="0" class="prism-code language-img codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">![Rancher Components](./assets/img/rancher/rancher-architecture-rancher-components.svg)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The GitHub repositories for Rancher can be found at the following links:</p><ul><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer">Main Rancher server repository</a></li><li><a href="https://github.com/rancher/ui" target="_blank" rel="noopener noreferrer">Rancher UI</a></li><li><a href="https://github.com/rancher/api-ui" target="_blank" rel="noopener noreferrer">Rancher API UI</a></li><li><a href="https://github.com/rancher/norman" target="_blank" rel="noopener noreferrer">Norman,</a> Rancher&#x27;s API framework</li><li><a href="https://github.com/rancher/types" target="_blank" rel="noopener noreferrer">Types</a></li><li><a href="https://github.com/rancher/cli" target="_blank" rel="noopener noreferrer">Rancher CLI</a></li><li><a href="https://github.com/rancher/helm" target="_blank" rel="noopener noreferrer">Catalog applications</a></li></ul><p>This is a partial list of the most important Rancher repositories. For more details about Rancher source code, refer to the section on <a href="https://rancher.com/docs/rancher/v2.6/en/contributing/#repositories" target="_blank" rel="noopener noreferrer">contributing to Rancher.</a> To see all libraries and projects used in Rancher, see the <a href="https://github.com/rancher/rancher/blob/master/go.mod" target="_blank" rel="noopener noreferrer"><code>go.mod</code> file</a> in the <code>rancher/rancher</code> repository.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/versioned_docs/version-2.5.9/overview/architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rancher-docusaurus/2.5.9/overview/architecture-recommendations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Architecture Recommendations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rancher-docusaurus/2.5.9/overview/concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes Concepts Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-the-authentication-proxy" class="table-of-contents__link">1. The Authentication Proxy</a></li><li><a href="#2-cluster-controllers-and-cluster-agents" class="table-of-contents__link">2. Cluster Controllers and Cluster Agents</a></li><li><a href="#3-node-agents" class="table-of-contents__link">3. Node Agents</a></li><li><a href="#4-authorized-cluster-endpoint" class="table-of-contents__link">4. Authorized Cluster Endpoint</a></li><li><a href="#rancher-launched-kubernetes-for-nodes-hosted-in-an-infrastructure-provider" class="table-of-contents__link">Rancher Launched Kubernetes for Nodes Hosted in an Infrastructure Provider</a></li><li><a href="#rancher-launched-kubernetes-for-custom-nodes" class="table-of-contents__link">Rancher Launched Kubernetes for Custom Nodes</a></li><li><a href="#hosted-kubernetes-providers" class="table-of-contents__link">Hosted Kubernetes Providers</a></li><li><a href="#registered-kubernetes-clusters" class="table-of-contents__link">Registered Kubernetes Clusters</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forums.rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.rancher.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://rancher.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher Website</a></li><li class="footer__item"><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rancher/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Rancher Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rancher-docusaurus/assets/js/runtime~main.e49194ca.js"></script>
<script src="/rancher-docusaurus/assets/js/main.ed945e9c.js"></script>
</body>
</html>