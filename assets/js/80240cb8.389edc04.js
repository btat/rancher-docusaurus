"use strict";(self.webpackChunkrancher_docusaurus=self.webpackChunkrancher_docusaurus||[]).push([[1754],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=o,h=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6602:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],s={title:"EC2 Node Template Configuration",position:1},c=void 0,l={unversionedId:"cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config",id:"cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config",isDocsHomePage:!1,title:"EC2 Node Template Configuration",description:"For more details about EC2, nodes, refer to the official documentation for the EC2 Management Console.",source:"@site/docs/cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config.md",sourceDirName:"cluster-provisioning/rke-clusters/node-pools/ec2",slug:"/cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config",permalink:"/rancher-docusaurus/cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/cluster-provisioning/rke-clusters/node-pools/ec2/ec2-node-template-config.md",tags:[],version:"current",frontMatter:{title:"EC2 Node Template Configuration",position:1},sidebar:"tutorialSidebar",previous:{title:"Creating a DigitalOcean Cluster",permalink:"/rancher-docusaurus/cluster-provisioning/rke-clusters/node-pools/digital-ocean/index"},next:{title:"Creating an Amazon EC2 Cluster",permalink:"/rancher-docusaurus/cluster-provisioning/rke-clusters/node-pools/ec2/index"}},u=[{value:"Region",id:"region",children:[]},{value:"Cloud Credentials",id:"cloud-credentials",children:[]},{value:"Authenticate &amp; Configure Nodes",id:"authenticate--configure-nodes",children:[]},{value:"Security Group",id:"security-group",children:[]},{value:"Instance Options",id:"instance-options",children:[]},{value:"Engine Options",id:"engine-options",children:[]}],p={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"For more details about EC2, nodes, refer to the official documentation for the ",(0,a.kt)("a",{parentName:"p",href:"https://aws.amazon.com/ec2"},"EC2 Management Console"),". "),(0,a.kt)("h3",{id:"region"},"Region"),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Region")," field, select the same region that you used when creating your cloud credentials."),(0,a.kt)("h3",{id:"cloud-credentials"},"Cloud Credentials"),(0,a.kt)("p",null,"Your AWS account access information, stored in a ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rancher/v2.6/en/user-settings/cloud-credentials/"},"cloud credential.")," "),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey"},"Amazon Documentation: Creating Access Keys")," how to create an Access Key and Secret Key."),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html#access_policies_create-start"},"Amazon Documentation: Creating IAM Policies (Console)")," how to create an IAM policy."),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_change-permissions.html#users_change_permissions-add-console"},"Amazon Documentation: Adding Permissions to a User (Console)")," how to attach an IAM "),(0,a.kt)("p",null,"See our three example JSON policies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/ec2/#example-iam-policy"},"Example IAM Policy")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/ec2/#example-iam-policy-with-passrole"},"Example IAM Policy with PassRole")," (needed if you want to use ",(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/cloud-providers"},"Kubernetes Cloud Provider")," or want to pass an IAM Profile to an instance)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/node-pools/ec2/#example-iam-policy-to-allow-encrypted-ebs-volumes"},"Example IAM Policy to allow encrypted EBS volumes")," policy to an user.")),(0,a.kt)("h3",{id:"authenticate--configure-nodes"},"Authenticate & Configure Nodes"),(0,a.kt)("p",null,"Choose an availability zone and network settings for your cluster. "),(0,a.kt)("h3",{id:"security-group"},"Security Group"),(0,a.kt)("p",null,"Choose the default security group or configure a security group."),(0,a.kt)("p",null,"Please refer to ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rancher/v2.6/en/installation/requirements/ports/#rancher-aws-ec2-security-group"},"Amazon EC2 security group when using Node Driver")," to see what rules are created in the ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher-nodes")," Security Group."),(0,a.kt)("h3",{id:"instance-options"},"Instance Options"),(0,a.kt)("p",null,"Configure the instances that will be created. Make sure you configure the correct ",(0,a.kt)("strong",{parentName:"p"},"SSH User")," for the configured AMI. It is possible that a selected region does not support the default instance type. In this scenario you must select an instance type that does exist, otherwise an error will occur stating the requested configuration is not supported."),(0,a.kt)("p",null,"If you need to pass an ",(0,a.kt)("strong",{parentName:"p"},"IAM Instance Profile Name")," (not ARN), for example, when you want to use a ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/rke-clusters/cloud-providers"},"Kubernetes Cloud Provider"),", you will need an additional permission in your policy. See ",(0,a.kt)("a",{parentName:"p",href:"#example-iam-policy-with-passrole"},"Example IAM policy with PassRole")," for an example policy."),(0,a.kt)("h3",{id:"engine-options"},"Engine Options"),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Engine Options")," section of the node template, you can configure the Docker daemon. You may want to specify the docker version or a Docker registry mirror."))}d.isMDXComponent=!0}}]);