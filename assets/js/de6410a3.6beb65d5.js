"use strict";(self.webpackChunkrancher_docusaurus=self.webpackChunkrancher_docusaurus||[]).push([[58121],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=a,h=d["".concat(l,".").concat(f)]||d[f]||p[f]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},56544:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var r=n(87462),a=n(63366),i=(n(67294),n(3905)),o=["components"],s={title:"Ingress Configuration",description:"Ingress configuration",position:9999},l=void 0,c={unversionedId:"k8s-in-rancher/load-balancers-and-ingress/ingress-config",id:"k8s-in-rancher/load-balancers-and-ingress/ingress-config",isDocsHomePage:!1,title:"Ingress Configuration",description:"Ingress configuration",source:"@site/docs/k8s-in-rancher/load-balancers-and-ingress/ingress-config.md",sourceDirName:"k8s-in-rancher/load-balancers-and-ingress",slug:"/k8s-in-rancher/load-balancers-and-ingress/ingress-config",permalink:"/rancher-docusaurus/next/k8s-in-rancher/load-balancers-and-ingress/ingress-config",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/k8s-in-rancher/load-balancers-and-ingress/ingress-config.md",tags:[],version:"current",frontMatter:{title:"Ingress Configuration",description:"Ingress configuration",position:9999},sidebar:"tutorialSidebar",previous:{title:"Set Up Load Balancer and Ingress Controller within Rancher",permalink:"/rancher-docusaurus/next/k8s-in-rancher/load-balancers-and-ingress/index"},next:{title:"Adding Ingresses",permalink:"/rancher-docusaurus/next/k8s-in-rancher/load-balancers-and-ingress/ingress"}},u=[{value:"NGINX Ingress controller changes in Kubernetes v1.21",id:"nginx-ingress-controller-changes-in-kubernetes-v121",children:[]},{value:"Specify a hostname to use",id:"specify-a-hostname-to-use",children:[]},{value:"Certificates",id:"certificates",children:[]},{value:"Labels and Annotations",id:"labels-and-annotations",children:[]}],p={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#nginx-ingress-controller-changes-in-Kubernetes-v1-21"},"NGINX Ingress controller changes in Kubernetes v1.21")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#automatically-generate-a-xip-io-hostname"},"Automatically generate a xip.io hostname")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#specify-a-hostname-to-use"},"Specify a hostname to use")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-as-the-default-backend"},"Use as the default backend")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#certificates"},"Certificates")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#labels-and-annotations"},"Labels and Annotations"))),(0,i.kt)("h3",{id:"nginx-ingress-controller-changes-in-kubernetes-v121"},"NGINX Ingress controller changes in Kubernetes v1.21"),(0,i.kt)("p",null,"For Kubernetes v1.21 and up, the NGINX Ingress controller no longer runs in hostNetwork but uses hostPorts for port 80 and port 443. This was done so the admission webhook can be configured to be accessed using ClusterIP so it can only be reached inside the cluster."),(0,i.kt)("h1",{id:"ingress-rule-configuration"},"Ingress Rule Configuration"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#specify-a-hostname-to-use"},"Specify a hostname to use")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-as-the-default-backend"},"Use as the default backend")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#certificates"},"Certificates")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#labels-and-annotations"},"Labels and Annotations"))),(0,i.kt)("h3",{id:"specify-a-hostname-to-use"},"Specify a hostname to use"),(0,i.kt)("p",null,"If you use this option, ingress routes requests for a hostname to the service or workload that you specify."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Enter the ",(0,i.kt)("strong",{parentName:"li"},"Request Host")," that your ingress will handle request forwarding for. For example, ",(0,i.kt)("inlineCode",{parentName:"li"},"www.mysite.com"),"."),(0,i.kt)("li",{parentName:"ol"},"Add a ",(0,i.kt)("strong",{parentName:"li"},"Target Service"),"."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Optional:")," If you want specify a workload or service when a request is sent to a particular hostname path, add a ",(0,i.kt)("strong",{parentName:"li"},"Path")," for the target. For example, if you want requests for ",(0,i.kt)("inlineCode",{parentName:"li"},"www.mysite.com/contact-us")," to be sent to a different service than ",(0,i.kt)("inlineCode",{parentName:"li"},"www.mysite.com"),", enter ",(0,i.kt)("inlineCode",{parentName:"li"},"/contact-us")," in the ",(0,i.kt)("strong",{parentName:"li"},"Path")," field. Typically, the first rule that you create does not include a path."),(0,i.kt)("li",{parentName:"ol"},"Enter the ",(0,i.kt)("strong",{parentName:"li"},"Port")," number that each target operates on.")),(0,i.kt)("h3",{id:"certificates"},"Certificates"),(0,i.kt)("p",null,">",(0,i.kt)("strong",{parentName:"p"},"Note:")," You must have an SSL certificate that the ingress can use to encrypt/decrypt communications. For more information see ",(0,i.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rancher/v2.6/en/k8s-in-rancher/certificates/"},"Adding SSL Certificates"),"."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"When creating an ingress, click the ",(0,i.kt)("strong",{parentName:"li"},"Certificates")," tab."),(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("strong",{parentName:"li"},"Add Certificate"),"."),(0,i.kt)("li",{parentName:"ol"},"Select a ",(0,i.kt)("strong",{parentName:"li"},"Certificate - Secret Name")," from the drop-down list."),(0,i.kt)("li",{parentName:"ol"},"Enter the host using encrypted communication."),(0,i.kt)("li",{parentName:"ol"},"To add additional hosts that use the certificate, click ",(0,i.kt)("strong",{parentName:"li"},"Add Hosts"),".")),(0,i.kt)("h3",{id:"labels-and-annotations"},"Labels and Annotations"),(0,i.kt)("p",null,"Add ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/"},"Labels")," and/or ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/"},"Annotations")," to provide metadata for your ingress."),(0,i.kt)("p",null,"For a list of annotations available for use, see the ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/"},"Nginx Ingress Controller Documentation"),"."))}d.isMDXComponent=!0}}]);